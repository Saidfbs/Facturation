<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport">
    <title>ุญุงุณุจุฉ ููุฑุจุงุฆูุฉ ูุชูุงููุฉ - ุงูุฅุตุฏุงุฑ ุงููุญุณู</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* ุชุนุฑูู ุงููุชุบูุฑุงุช ุงูุฃุณุงุณูุฉ ูู CSS ูุณูููุฉ ุงูุชุฎุตูุต ูุงูุซุจุงุช ูู ุงูุชุตููู */
        :root {
            --main-color: #004e92; /* ุงูููู ุงูุฃุฒุฑู ุงูุฑุฆูุณู */
            --accent-color: #000428; /* ููู ุงูุชูููุฒ ุงูุฏุงูู */
            --background: #f1f4f9; /* ููู ุงูุฎูููุฉ ุงููุงุชุญ */
            --white: #ffffff; /* ุงูููู ุงูุฃุจูุถ */
            --border-radius: 12px; /* ูุตู ูุทุฑ ุงูุฒูุงูุง ููุนูุงุตุฑ */
            --error-color: #e63946; /* ููู ุงูุฎุทุฃ (ุฃุญูุฑ) */
            --success-color: #2a9d8f; /* ููู ุงููุฌุงุญ (ุฃุฎุถุฑ ูุฒุฑู) */
        }

        /* ุชูุณูู ุงูุฌุณู ุงูุฃุณุงุณู ููุตูุญุฉ */
        body {
            font-family: 'Cairo', sans-serif; /* ุชุทุจูู ุฎุท ุงููุงูุฑุฉ */
            background-color: var(--background); /* ููู ุงูุฎูููุฉ ูู ุงููุชุบูุฑุงุช */
            margin: 0;
            padding: 20px;
            line-height: 1.6; /* ุชุจุงุนุฏ ุงูุฃุณุทุฑ ูุชุญุณูู ุงููุฑุงุกุฉ */
            direction: rtl; /* ุงุชุฌุงู ุงููุต ูู ุงููููู ูููุณุงุฑ (ุงููุบุฉ ุงูุนุฑุจูุฉ) */
            text-align: right; /* ูุญุงุฐุงุฉ ุงููุต ูููููู */
        }

        /* ุชูุณูู ุงูุญุงููุฉ ุงูุฑุฆูุณูุฉ ูููุญุชูู */
        .container {
            max-width: 900px; /* ุฃูุตู ุนุฑุถ ููุญุงููุฉ */
            margin: 20px auto; /* ุชูุณูุท ุงูุญุงููุฉ ุฃูููุงู ูุน ูุงูุด ุนููู ูุณููู */
            background-color: var(--white); /* ุฎูููุฉ ุจูุถุงุก */
            padding: 25px;
            border-radius: var(--border-radius); /* ุฒูุงูุง ูุณุชุฏูุฑุฉ */
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1); /* ุธู ุฎููู ูุฅุถุงูุฉ ุนูู */
        }

        /* ุชูุณูู ุฑุฃุณ ุงูุตูุญุฉ */
        .header {
            text-align: center; /* ูุญุงุฐุงุฉ ุงููุต ูููุณุท */
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--main-color); /* ุฎุท ุณููู ุจููู ุฑุฆูุณู */
        }

        .header h1 {
            color: var(--main-color); /* ููู ุงูุนููุงู ุงูุฑุฆูุณู */
            margin-bottom: 10px;
        }

        /* ุชูุณูู ุงูุนูุงููู (H2) ุงูุชู ุชุนูู ูุฃุฒุฑุงุฑ ููุชุญ ุงูููุฏุงู */
        h2 {
            background: linear-gradient(to left, var(--main-color), var(--accent-color)); /* ุชุฏุฑุฌ ูููู ููุฎูููุฉ */
            color: var(--white); /* ููู ุงููุต ุฃุจูุถ */
            padding: 12px;
            border-radius: var(--border-radius); /* ุฒูุงูุง ูุณุชุฏูุฑุฉ */
            text-align: center;
            margin-top: 30px;
            cursor: pointer; /* ุชุบููุฑ ุดูู ุงููุคุดุฑ ููุฏู ุนูู ุฃูู ูุงุจู ููููุฑ */
            transition: all 0.3s ease; /* ุงูุชูุงู ุณูุณ ุนูุฏ ุงูุชูุงุนู */
            user-select: none; /* ููุน ุชุญุฏูุฏ ุงููุต */
            position: relative;
            display: flex; /* ุงุณุชุฎุฏุงู ููููุณ ุจููุณ ูููุญุงุฐุงุฉ ุงูุฏุงุฎููุฉ */
            align-items: center; /* ูุญุงุฐุงุฉ ุงูุนูุงุตุฑ ุนููุฏูุงู */
            justify-content: center; /* ูุญุงุฐุงุฉ ุงูุนูุงุตุฑ ุฃูููุงู */
            gap: 10px; /* ูุณุงูุฉ ุจูู ุงูุนูุงุตุฑ */
        }

        h2:hover {
            opacity: 0.9; /* ุชูููู ุงูุดูุงููุฉ ุนูุฏ ุงูุชุญููู */
            transform: translateY(-2px); /* ุชุญุฑูู ุทููู ููุฃุนูู */
        }

        h2::after {
            content: ""; /* ูุญุชูู ูุงุฑุบ ููุนูุงุตุฑ ุงูุฒุงุฆูุฉ */
        }

        h2.collapsed::after {
            content: ""; /* ููุณ ุงูุดูุกุ ูุฏ ูููู ููุงู ุงุณุชุฎุฏุงู ูุฎุชูู ูู ุญุงูุงุช ุงูุทู */
        }

        /* ----------------------- ุชูุณููุงุช ุงูููุงูุฐ ุงูููุจุซูุฉ (Modal) ----------------------- */
        .modal {
            display: none; /* ุฅุฎูุงุก ุงูููุฏุงู ุงูุชุฑุงุถูุงู */
            position: fixed; /* ูุถุน ุซุงุจุช ููุบุทู ุงูุดุงุดุฉ ุจุฃููููุง */
            z-index: 1000; /* ุทุจูุฉ ุนููุง ูุถูุงู ุธููุฑู ููู ูู ุดูุก */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; /* ุฅุถุงูุฉ ุดุฑูุท ุชูุฑูุฑ ุฅุฐุง ูุงู ุงููุญุชูู ุฃูุจุฑ ูู ุงูููุฏุงู */
            background-color: rgba(0, 0, 0, 0.6); /* ุฎูููุฉ ุดุจู ุดูุงูุฉ */
            backdrop-filter: blur(5px); /* ุชุฃุซูุฑ ุถุจุงุจู ููุฎูููุฉ */
            justify-content: center; /* ุชูุณูุท ุงููุญุชูู ุฃูููุงู */
            align-items: center; /* ุชูุณูุท ุงููุญุชูู ุนููุฏูุงู */
            animation: fadeInModal 0.3s ease-out; /* ุชุทุจูู ุญุฑูุฉ ุงูุธููุฑ */
        }

        .modal.active {
            display: flex; /* ุฅุธูุงุฑ ุงูููุฏุงู ุนูุฏ ุชูุนูู ุงูููุงุณ */
        }

        .modal-content {
            background-color: var(--white); /* ุฎูููุฉ ุจูุถุงุก ูููุญุชูู */
            margin: auto;
            padding: 30px;
            border-radius: var(--border-radius); /* ุฒูุงูุง ูุณุชุฏูุฑุฉ */
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2); /* ุธู ุฃุนูู */
            width: 90%; /* ุนุฑุถ 90% ูู ุงูุญุงููุฉ */
            max-width: 600px; /* ุฃูุตู ุนุฑุถ 600 ุจูุณู */
            position: relative;
            animation: slideIn 0.3s ease-out; /* ุชุทุจูู ุญุฑูุฉ ุงูุงูุฒูุงู ููุฏุงุฎู */
        }

        /* ุฒุฑ ุงูุฅุบูุงู ุฏุงุฎู ุงูููุฏุงู */
        .close-button {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            left: 15px; /* ูุธูุฑ ุนูู ุงููุณุงุฑ ูู ุงูุชุตููู ุงููููู ูููุณุงุฑ */
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-button:hover,
        .close-button:focus {
            color: var(--error-color); /* ุชุบููุฑ ุงูููู ุนูุฏ ุงูุชุญููู ุฃู ุงูุชุฑููุฒ */
            text-decoration: none;
            cursor: pointer;
        }

        /* ุญุฑูุงุช CSS ููููุฏุงู */
        @keyframes fadeInModal {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* ----------------------- ุชูุณููุงุช ุงูุขูุฉ ุงูุญุงุณุจุฉ (ุฏุงุฎู ุงูููุฏุงู) ----------------------- */
        .calculator {
            display: grid; /* ุงุณุชุฎุฏุงู ูุธุงู ุงูุดุจูุฉ ูุชุฑุชูุจ ุงูุนูุงุตุฑ */
            grid-template-columns: 1fr; /* ุนููุฏ ูุงุญุฏ */
            gap: 15px; /* ูุณุงูุฉ ุจูู ุงูุนูุงุตุฑ */
            margin-top: 10px;
            padding: 0;
            background-color: transparent; /* ุฎูููุฉ ุดูุงูุฉ */
            border-radius: 0;
            border: none;
            animation: none;
        }

        /* ูุตู ููู ุขูุฉ ุญุงุณุจุฉ */
        .calculator-description {
            background-color: #e7f3ff; /* ููู ุฎูููุฉ ูุงุชุญ */
            padding: 10px 15px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            font-size: 0.9em;
            border-right: 3px solid var(--main-color); /* ุดุฑูุท ุนูู ุงููููู */
        }

        /* ูุฌููุนุฉ ุฅุฏุฎุงู (Label + Input) */
        .input-group {
            display: flex; /* ุงุณุชุฎุฏุงู ููููุณ ุจููุณ */
            flex-direction: column; /* ุชุฑุชูุจ ุงูุนูุงุตุฑ ุนููุฏูุงู */
            gap: 5px; /* ูุณุงูุฉ ุจูู Label ู Input */
        }

        .input-group label {
            font-weight: 600; /* ุฎุท ุณููู */
            color: var(--main-color); /* ููู ุงููุต ุงูุฑุฆูุณู */
        }

        /* ุชูุณูู ุญููู ุงูุฅุฏุฎุงู ูุงูุงุฎุชูุงุฑ ูุงูุฃุฒุฑุงุฑ */
        .calculator input,
        .calculator select,
        .calculator button {
            padding: 12px;
            font-size: 1em;
            width: 100%; /* ุนุฑุถ ูุงูู */
            border: 1px solid #ccc;
            border-radius: var(--border-radius);
            box-sizing: border-box; /* ูุถูุงู ุฃู ุงูุนุฑุถ ูุดูู ุงูุจุงุฏููุบ ูุงูุญุฏูุฏ */
            font-family: 'Cairo', sans-serif; /* ุชุทุจูู ุฎุท ุงููุงูุฑุฉ */
            transition: all 0.2s ease; /* ุงูุชูุงู ุณูุณ ุนูุฏ ุงูุชูุงุนู */
            text-align: right; /* ูุญุงุฐุงุฉ ุงููุต ูููููู */
        }

        /* ุชูุณูู ุญููู ุงูุฅุฏุฎุงู ุนูุฏ ุงูุชุฑููุฒ */
        .calculator input:focus,
        .calculator select:focus {
            border-color: var(--main-color); /* ุชุบููุฑ ููู ุงูุญุฏูุฏ */
            box-shadow: 0 0 0 2px rgba(0, 78, 146, 0.2); /* ุฅุถุงูุฉ ุธู ุฎููู */
            outline: none; /* ุฅุฒุงูุฉ ุงูุฎุท ุงูุฃุฒุฑู ุงูุงูุชุฑุงุถู ุนูุฏ ุงูุชุฑููุฒ */
        }

        /* ุชูุณูู ุญููู ุงูุฅุฏุฎุงู ุงูุชู ุชุญุชูู ุนูู ุฎุทุฃ */
        .calculator input.error {
            border-color: var(--error-color); /* ููู ุญุฏูุฏ ุฃุญูุฑ */
        }

        /* ุชูุณูู ุงูุฃุฒุฑุงุฑ */
        button {
            background-color: var(--main-color); /* ููู ุฎูููุฉ ูู ุงููุชุบูุฑุงุช */
            color: var(--white); /* ููู ุงููุต ุฃุจูุถ */
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        button:hover {
            background-color: var(--accent-color); /* ุชุบููุฑ ููู ุงูุฎูููุฉ ุนูุฏ ุงูุชุญููู */
            transform: translateY(-2px); /* ุชุญุฑูู ุทููู ููุฃุนูู */
        }

        button:active {
            transform: translateY(0); /* ุฅุนุงุฏุฉ ุงูุฒุฑ ูููุงูู ุงูุฃุตูู ุนูุฏ ุงูุถุบุท */
        }

        /* ุชูุณูู ุงูุฃูุณุงู ุงูุฑุฆูุณูุฉ ูู ุงูุตูุญุฉ */
        .section {
            margin-bottom: 20px;
        }

        /* ุชูุณูู ุนุฑุถ ุงููุชุงุฆุฌ */
        .result {
            background-color: #e7f3ff; /* ููู ุฎูููุฉ ูุงุชุญ */
            padding: 15px;
            border-radius: var(--border-radius);
            font-weight: bold;
            margin-top: 10px;
            text-align: right;
            font-size: 1.1em;
            border-left: 4px solid var(--main-color); /* ุดุฑูุท ุนูู ุงููุณุงุฑ ูุชูููุฒ ุงููุชุงุฆุฌ */
        }

        .result ul {
            list-style: none; /* ุฅุฒุงูุฉ ููุงุท ุงููุงุฆูุฉ ุงูุงูุชุฑุงุถูุฉ */
            padding: 0;
            margin: 10px 0;
        }

        .result ul li {
            margin-bottom: 8px;
            padding-right: 15px;
            position: relative;
            font-weight: normal;
            font-size: 0.95em;
        }

        .result ul li::before {
            content: "โข"; /* ุฅุถุงูุฉ ููุทุฉ ูุงุฆูุฉ ูุฎุตุตุฉ */
            color: var(--main-color); /* ููู ุงูููุทุฉ */
            position: absolute;
            right: 0; /* ูุถุน ุงูููุทุฉ ุนูู ุงููููู */
            top: 0;
            font-size: 1.2em;
            line-height: 1.4;
        }

        /* ุชูุณูู ุงููุชุงุฆุฌ ูู ุญุงูุฉ ุงููุฌุงุญ */
        .result.success {
            background-color: #e8f8f6; /* ุฎูููุฉ ุฎุถุฑุงุก ูุงุชุญุฉ ุฌุฏุงู */
            border-left-color: var(--success-color); /* ุดุฑูุท ูุณุงุฑ ุจููู ุงููุฌุงุญ */
        }

        /* ุชูุณูู ุงููุชุงุฆุฌ ูู ุญุงูุฉ ุงูุฎุทุฃ */
        .result.error {
            background-color: #fee8e9; /* ุฎูููุฉ ุญูุฑุงุก ูุงุชุญุฉ ุฌุฏุงู */
            border-left-color: var(--error-color); /* ุดุฑูุท ูุณุงุฑ ุจููู ุงูุฎุทุฃ */
        }

        /* ุชูุณูู ุฃููููุฉ ุงูุชุญููู (spinner) */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, .3);
            border-radius: 50%; /* ูุฌุนููุง ุฏุงุฆุฑุฉ */
            border-top-color: var(--white); /* ุฌุฒุก ูู ุงูุฏุงุฆุฑุฉ ุจููู ูุฎุชูู ูุฅูุดุงุก ุชุฃุซูุฑ ุงูุฏูุฑุงู */
            animation: spin 1s ease-in-out infinite; /* ุชุทุจูู ุญุฑูุฉ ุงูุฏูุฑุงู */
        }

        @keyframes spin {
            to { transform: rotate(360deg); } /* ุฏูุฑุงู ูุงูู */
        }

        /* ุชูุณูู ูุณู ุงูุณุฌู (History) */
        .history {
            margin-top: 20px;
            padding: 15px;
            background-color: #f5f5f5; /* ุฎูููุฉ ุฑูุงุฏูุฉ ูุงุชุญุฉ */
            border-radius: var(--border-radius);
            display: block;
        }

        .history h3 {
            margin-top: 0;
            color: var(--main-color);
            border-bottom: 1px solid #ddd; /* ุฎุท ุณููู ุฎููู */
            padding-bottom: 10px;
        }

        .history-item {
            padding: 8px 0;
            border-bottom: 1px dotted #ddd; /* ุฎุท ุณููู ูููุท */
        }

        .history-item:last-child {
            border-bottom: none; /* ุฅุฒุงูุฉ ุงูุฎุท ุงูุณููู ูู ุขุฎุฑ ุนูุตุฑ */
        }

        /* ----------------------- ุชูุณููุงุช ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ (Media Queries) ----------------------- */
        @media (max-width: 768px) {
            .container {
                padding: 15px; /* ุชูููู ุงูุจุงุฏููุบ ุนูู ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ */
            }

            h2 {
                font-size: 1.2em;
                padding: 10px;
            }

            .modal-content {
                width: 95%; /* ุฒูุงุฏุฉ ุงูุนุฑุถ ุนูู ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ */
                padding: 20px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <h1>โก ุงูุญุงุณุจุฉ ุงูููุฑุจุงุฆูุฉ ุงููุชูุงููุฉ</h1>
            <p>ุฃุฏุงุฉ ูุชูุงููุฉ ูุญู ุฌููุน ุญุณุงุจุงุชู ุงูููุฑุจุงุฆูุฉ ูุงูููุฏุณูุฉ</p>
        </div>

        <div class="section">
            <h2 class="section-title" data-modal-target="modal-percentage-calculator">๐ ุญุณุงุจ ุงููุณุจุฉ ุงููุฆููุฉ</h2>
            <div id="modal-percentage-calculator" class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h2>๐ ุญุณุงุจ ุงููุณุจุฉ ุงููุฆููุฉ</h2>
                    <div class="calculator" id="percentage-calculator">
                        <div class="calculator-description">
                            ุญุณุงุจ ุงููุณุจุฉ ุงููุฆููุฉ ููููุฉ ูุนููุฉ ูู ุนุฏุฏ ุฃุตูู.
                        </div>
                        <div class="input-group">
                            <label for="original-number">ุงูุนุฏุฏ ุงูุฃุตูู</label>
                            <input type="number" id="original-number" placeholder="ุฃุฏุฎู ุงูุนุฏุฏ ุงูุฃุตูู" min="0">
                        </div>
                        <div class="input-group">
                            <label for="percentage-value">ุงููุณุจุฉ ุงููุฆููุฉ ุงููุทููุจุฉ (%)</label>
                            <input type="number" id="percentage-value" placeholder="ุฃุฏุฎู ุงููุณุจุฉ ุงููุฆููุฉ" min="0" max="100">
                        </div>
                        <button id="calculate-percentage-btn">ุงุญุณุจ ุงููุงุชุฌ</button>
                        <div class="result" id="percentage-result">ุงููุงุชุฌ: ...</div>
                        <div class="history" id="percentage-history">
                            <h3>ุณุฌู ุงูุญุณุงุจุงุช (ุขุฎุฑ 5)</h3>
                            <div id="percentage-history-items"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title" data-modal-target="modal-unit-converter">๐ ูุญูู ุงููุญุฏุงุช ุงูููุฑุจุงุฆูุฉ</h2>
            <div id="modal-unit-converter" class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h2>๐ ูุญูู ุงููุญุฏุงุช ุงูููุฑุจุงุฆูุฉ</h2>
                    <div class="calculator" id="unit-converter">
                        <div class="calculator-description">
                            ุฃุฏุฎู ูููุฉ ุจูุญุฏุฉ ูุนููุฉ (ูููููุงุทุ ูููู ูููุช ุฃูุจูุฑุ ุญุตุงูุ ุฃู ุฃูุจูุฑ) ูุน ุงูุฌูุฏุ ุงูุทูุฑุ ููุนุงูู
                            ุงููุฏุฑุฉุ ูุณูููู ุจุชุญููููุง ุฅูู ุงููุญุฏุงุช ุงูุฃุฎุฑู.
                        </div>
                        <div class="input-group">
                            <label for="uc-voltage">ุงูุฌูุฏ (V)</label>
                            <input type="number" id="uc-voltage" placeholder="ูุซุงู: 230 ุฃู 400" min="1">
                        </div>
                        <div class="input-group">
                            <label for="uc-phase">ุงูุทูุฑ</label>
                            <select id="uc-phase">
                                <option value="single">ุฃุญุงุฏู ุงูุทูุฑ</option>
                                <option value="three">ุซูุงุซู ุงูุทูุฑ</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="uc-power-factor">ูุนุงูู ุงููุฏุฑุฉ (cos ฯ)</label>
                            <input type="number" id="uc-power-factor" value="0.8" step="0.01" min="0.1" max="1"
                                placeholder="ูุซุงู: 0.8">
                        </div>
                        <div class="input-group">
                            <label for="uc-input-value">ุงููููุฉ ุงููุฏุฎูุฉ</label>
                            <input type="number" id="uc-input-value" placeholder="ุฃุฏุฎู ุงููููุฉ" min="0">
                        </div>
                        <div class="input-group">
                            <label for="uc-input-unit">ูุญุฏุฉ ุงููููุฉ ุงููุฏุฎูุฉ</label>
                            <select id="uc-input-unit">
                                <option value="kw">ูููููุงุท (kW)</option>
                                <option value="kva">ูููู ูููุช ุฃูุจูุฑ (kVA)</option>
                                <option value="hp">ุญุตุงู (HP)</option>
                                <option value="amp">ุฃูุจูุฑ (Amp)</option>
                            </select>
                        </div>
                        <button id="convert-unit-btn">ุชุญููู</button>
                        <div class="result" id="uc-result">
                            <p>ุงููุชุงุฆุฌ: ...</p>
                        </div>
                        <div class="history" id="uc-history">
                            <h3>ุณุฌู ุงูุชุญูููุงุช (ุขุฎุฑ 5)</h3>
                            <div id="uc-history-items"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title" data-modal-target="modal-solar-panels">โ๏ธ ุญุณุงุจ ุนุฏุฏ ุงูุฃููุงุญ ุงูุดูุณูุฉ ููุถุฎุฉ</h2>
            <div id="modal-solar-panels" class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h2>โ๏ธ ุญุณุงุจ ุนุฏุฏ ุงูุฃููุงุญ ุงูุดูุณูุฉ ููุถุฎุฉ</h2>
                    <div class="calculator" id="solar-panels-calculator">
                        <div class="calculator-description">
                            ุญุณุงุจ ุนุฏุฏ ุงูุฃููุงุญ ุงูุดูุณูุฉ ุงููุทููุจุฉ ูุชุดุบูู ูุถุฎุฉ ุจูุงุกู ุนูู ูุฏุฑุชูุง ุจุงููููููุงุทุ ูุน ุงูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฌูุฏ ู ุทูุฑ ุงููุถุฎุฉ (ูููุนูููุงุช)ุ ู ูุนุงูู ุฃุฏุงุก ุงูุฃููุงุญ ูููุงุกุฉ ุงููุญูู.
                        </div>
                        <div class="input-group">
                            <label for="pump-voltage">ุฌูุฏ ุงููุถุฎุฉ (V)</label>
                            <input type="number" id="pump-voltage" placeholder="ุฌูุฏ ุงููุถุฎุฉ ุจุงููููุช" min="1">
                        </div>


                        <div class="input-group">
                            <label for="pump-power-kw">ูุฏุฑุฉ ุงููุถุฎุฉ (kW)</label>
                            <input type="number" id="pump-power-kw" placeholder="ุฃุฏุฎู ูุฏุฑุฉ ุงููุถุฎุฉ ุจุงููููููุงุท" min="0.1">
                        </div>

                       
                        <div class="input-group">
                            <label for="pump-phase">ุทูุฑ ุงููุถุฎุฉ</label>
                            <select id="pump-phase">
                                <option value="single">ุฃุญุงุฏู ุงูุทูุฑ</option>
                                <option value="three">ุซูุงุซู ุงูุทูุฑ</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="pump-power-factor">ูุนุงูู ูุฏุฑุฉ ุงููุถุฎุฉ (cos ฯ)</label>
                            <input type="number" id="pump-power-factor" value="0.8" step="0.01" min="0.1" max="1" placeholder="ูุซุงู: 0.8">
                        </div>
                       
                        

                        <div class="input-group">
                            <label for="panel-voltage">ุฌูุฏ ุงูููุญ ุงูุดูุณู (Vmp)</label>
                            <input type="number" id="panel-voltage" placeholder="ุฌูุฏ ุงูููุญ ุจุงููููุช" min="1">
                        </div>
                        <div class="input-group">
                            <label for="panel-current">ุชูุงุฑ ุงูููุญ ุงูุดูุณู (Imp)</label>
                            <input type="number" id="panel-current" placeholder="ุชูุงุฑ ุงูููุญ ุจุงูุฃูุจูุฑ" min="0.1">
                        </div>
                        <div class="input-group">
                            <label for="solar-performance-factor">ุนุงูู ุฃุฏุงุก ุงูุฃููุงุญ (%)</label>
                            <input type="number" id="solar-performance-factor" value="80" min="50" max="100" step="1"
                                placeholder="ูุซุงู: 80 (80%)">
                        </div>
                        <div class="input-group">
                            <label for="inverter-efficiency">ููุงุกุฉ ุงููุญูู (Inverter Efficiency %)</label>
                            <input type="number" id="inverter-efficiency" value="90" min="50" max="100" step="1"
                                placeholder="ูุซุงู: 90 (90%)">
                        </div>
                        <div class="input-group">
                            <label for="ideal-series-voltage">ุงูุชูุชุฑ ุงููุซุงูู ููุฃููุงุญ ุนูู ุงูุชูุงูู (V)</label>
                            <input type="number" id="ideal-series-voltage" placeholder="ูุซุงู: 300V" min="1">
                        </div>
                        <button id="calculate-solar-panels-btn">ุงุญุณุจ ุงูุฃููุงุญ</button>
                        <div class="result" id="solar-panels-result">ุงููุชุงุฆุฌ: ...</div>
                        <div class="history" id="solar-panels-history">
                            <h3>ุณุฌู ุงูุญุณุงุจุงุช (ุขุฎุฑ 5)</h3>
                            <div id="solar-panels-history-items"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title" data-modal-target="modal-pulley-calculator">โ๏ธ ุญุณุงุจ ุณุฑุนุฉ ุฃู ูุทุฑ ุงูุจูุฑุฉ</h2>
            <div id="modal-pulley-calculator" class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h2>โ๏ธ ุญุณุงุจ ุณุฑุนุฉ ุฃู ูุทุฑ ุงูุจูุฑุฉ</h2>
                    <div class="calculator" id="pulley-calculator">
                        <div class="calculator-description">
                            ุงุญุณุจ ุงูุณุฑุนุฉ ุฃู ุงููุทุฑ ุงููุฌููู ููุจูุฑุฉ ุจูุงุกู ุนูู ุซูุงุซุฉ ููู ูุนูููุฉ.
                        </div>
                        <div class="input-group">
                            <label for="pulley-d1">ูุทุฑ ุงูุจูุฑุฉ ุงูุฃููู (ูู)</label>
                            <input type="number" id="pulley-d1" placeholder="ูุทุฑ ุงูุจูุฑุฉ ุงูุฃููู (ุงุชุฑูู ูุงุฑุบุงู ุฅุฐุง ูุงู ูุฌูููุงู)"
                                min="0">
                        </div>
                        <div class="input-group">
                            <label for="pulley-rpm1">ุณุฑุนุฉ ุงูุจูุฑุฉ ุงูุฃููู (RPM)</label>
                            <input type="number" id="pulley-rpm1" placeholder="ุณุฑุนุฉ ุงูุจูุฑุฉ ุงูุฃููู (ุงุชุฑูู ูุงุฑุบุงู ุฅุฐุง ูุงู ูุฌูููุงู)"
                                min="0">
                        </div>
                        <div class="input-group">
                            <label for="pulley-d2">ูุทุฑ ุงูุจูุฑุฉ ุงูุซุงููุฉ (ูู)</label>
                            <input type="number" id="pulley-d2" placeholder="ูุทุฑ ุงูุจูุฑุฉ ุงูุซุงููุฉ (ุงุชุฑูู ูุงุฑุบุงู ุฅุฐุง ูุงู ูุฌูููุงู)"
                                min="0">
                        </div>
                        <div class="input-group">
                            <label for="pulley-rpm2">ุณุฑุนุฉ ุงูุจูุฑุฉ ุงูุซุงููุฉ (RPM)</label>
                            <input type="number" id="pulley-rpm2" placeholder="ุณุฑุนุฉ ุงูุจูุฑุฉ ุงูุซุงููุฉ (ุงุชุฑูู ูุงุฑุบุงู ุฅุฐุง ูุงู ูุฌูููุงู)"
                                min="0">
                        </div>
                        <button id="calculate-pulley-btn">ุงุญุณุจ ุงููุฌููู</button>
                        <div class="result" id="pulley-result">ุงููุชุงุฆุฌ: ...</div>
                        <div class="history" id="pulley-history">
                            <h3>ุณุฌู ุงูุญุณุงุจุงุช (ุขุฎุฑ 5)</h3>
                            <div id="pulley-history-items"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title" data-modal-target="modal-battery-calculator">๐ ุญุงุณุจุฉ ุณุนุฉ ุงูุจุทุงุฑูุฉ</h2>
            <div id="modal-battery-calculator" class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h2>๐ ุญุงุณุจุฉ ุณุนุฉ ุงูุจุทุงุฑูุฉ</h2>
                    <div class="calculator" id="battery-calculator">
                        <div class="calculator-description">
                            ุญุณุงุจ ุณุนุฉ ุงูุจุทุงุฑูุฉ ุงููุทููุจุฉ ุจุงูุฃูุจูุฑ-ุณุงุนุฉ ุจูุงุกู ุนูู ูุชุทูุจุงุช ุงูุฌูุงุฒ ูุฌูุฏ ุงูุจุทุงุฑูุฉุ ูุน ูุฑุงุนุงุฉ
                            ุนูู ุงูุชูุฑูุบ ูููุงุกุฉ ุงูุจุทุงุฑูุฉุ ูููุน ุงูุฌูุงุฒ (DC/AC)ุ ูุทูุฑู ููุนุงูู ูุฏุฑุชู ูููุงุกุฉ ุงููุญูู (ูุฃุญูุงู
                            ุงูุชูุงุฑ ุงููุชุฑุฏุฏ).
                        </div>
                        <div class="input-group">
                            <label for="battery-device-type">ููุน ุงูุฌูุงุฒ</label>
                            <select id="battery-device-type">
                                <option value="dc">ุชูุงุฑ ูุณุชูุฑ (DC)</option>
                                <option value="ac">ุชูุงุฑ ูุชุฑุฏุฏ (AC)</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="device-voltage">ุฌูุฏ ุงูุฌูุงุฒ (V)</label>
                            <input type="number" id="device-voltage" placeholder="ุชูุชุฑ ุงูุฌูุงุฒ ุจุงููููุช" min="1">
                        </div>
                        <div class="input-group">
                            <label for="device-current">ุชูุงุฑ ุงูุฌูุงุฒ (A)</label>
                            <input type="number" id="device-current" placeholder="ุชูุงุฑ ุงูุฌูุงุฒ ุจุงูุฃูุจูุฑ" min="0.1">
                        </div>

                        <div class="input-group battery-ac-only" style="display: none;">
                            <label for="battery-device-phase">ุทูุฑ ุงูุฌูุงุฒ</label>
                            <select id="battery-device-phase">
                                <option value="single">ุฃุญุงุฏู ุงูุทูุฑ</option>
                                <option value="three">ุซูุงุซู ุงูุทูุฑ</option>
                            </select>
                        </div>
                        <div class="input-group battery-ac-only" style="display: none;">
                            <label for="battery-device-power-factor">ูุนุงูู ูุฏุฑุฉ ุงูุฌูุงุฒ (cos ฯ)</label>
                            <input type="number" id="battery-device-power-factor" value="0.8" step="0.01" min="0.1"
                                max="1" placeholder="ูุซุงู: 0.8">
                        </div>
                        <div class="input-group battery-ac-only" style="display: none;">
                            <label for="inverter-efficiency-battery">ููุงุกุฉ ุงููุญูู (Inverter Efficiency %)</label>
                            <input type="number" id="inverter-efficiency-battery" value="90" min="50" max="100" step="1"
                                placeholder="ูุซุงู: 90 (90%)">
                        </div>

                        <div class="input-group">
                            <label for="operation-duration">ูุฏุฉ ุงูุชุดุบูู (ุจุงูุณุงุนุงุช)</label>
                            <input type="number" id="operation-duration" placeholder="ูุฏุฉ ุงูุชุดุบูู ุจุงูุณุงุนุงุช" min="0.1">
                        </div>
                        <div class="input-group">
                            <label for="battery-voltage">ุชูุชุฑ ุงูุจุทุงุฑูุฉ (V)</label>
                            <input type="number" id="battery-voltage" placeholder="ุชูุชุฑ ุงูุจุทุงุฑูุฉ ุจุงููููุช" min="1">
                        </div>
                        <div class="input-group">
                            <label for="battery-dod">ุนูู ุงูุชูุฑูุบ ุงูุฃูุตู (%)</label>
                            <input type="number" id="battery-dod" value="80" min="10" max="100" step="1"
                                placeholder="ูุซุงู: 80 (80%)">
                        </div>
                        <div class="input-group">
                            <label for="battery-efficiency">ููุงุกุฉ ุงูุจุทุงุฑูุฉ (%)</label>
                            <input type="number" id="battery-efficiency" value="90" min="50" max="100" step="1"
                                placeholder="ูุซุงู: 90 (90%)">
                        </div>
                        <button id="calculate-battery-btn">ุงุญุณุจ ุงูุณุนุฉ</button>
                        <div class="result" id="battery-result">ุงููุชุงุฆุฌ: ...</div>
                        <div class="history" id="battery-history">
                            <h3>ุณุฌู ุงูุญุณุงุจุงุช (ุขุฎุฑ 5)</h3>
                            <div id="battery-history-items"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title" data-modal-target="modal-flow-converter">๐ง ุชุญููู ูุญุฏุงุช ุงูุชุฏูู</h2>
            <div id="modal-flow-converter" class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h2>๐ง ุชุญููู ูุญุฏุงุช ุงูุชุฏูู</h2>
                    <div class="calculator" id="flow-converter">
                        <div class="calculator-description">
                            ุชุญููู ูุนุฏู ุงูุชุฏูู ุจูู ูุชุฑ ููุนุจ ูู ุงูุณุงุนุฉ ููุชุฑ ูู ุงูุซุงููุฉ.
                        </div>
                        <div class="input-group">
                            <label for="flow-input-value">ุงููููุฉ</label>
                            <input type="number" id="flow-input-value" placeholder="ุฃุฏุฎู ุงููููุฉ ููุชุญููู" min="0">
                        </div>
                        <div class="input-group">
                            <label for="flow-conversion-type">ููุน ุงูุชุญููู</label>
                            <select id="flow-conversion-type">
                                <option value="m3h-to-lps">ูู ูยณ/ุณุงุนุฉ ุฅูู ูุชุฑ/ุซุงููุฉ</option>
                                <option value="lps-to-m3h">ูู ูุชุฑ/ุซุงููุฉ ุฅูู ูยณ/ุณุงุนุฉ</option>
                            </select>
                        </div>
                        <button id="convert-flow-btn">ุชุญููู</button>
                        <div class="result" id="flow-result">ุงููุชูุฌุฉ: ...</div>
                        <div class="history" id="flow-history">
                            <h3>ุณุฌู ุงูุชุญูููุงุช (ุขุฎุฑ 5)</h3>
                            <div id="flow-history-items"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title" data-modal-target="modal-tank-calculator">๐งฑ ุญุณุงุจ ุณุนุฉ ุงูุฎุฒุงู ูุงูุชุฏูู</h2>
            <div id="modal-tank-calculator" class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h2>๐งฑ ุญุณุงุจ ุณุนุฉ ุงูุฎุฒุงู ูุงูุชุฏูู</h2>
                    <div class="calculator" id="tank-calculator">
                        <div class="calculator-description">
                            ุญุณุงุจ ุณุนุฉ ุงูุฎุฒุงู ููุฏุฉ ุชูุฑูุบู ุจูุงุกู ุนูู ุงูุฃุจุนุงุฏ ูุดูู ุงูุฎุฒุงู ููุนุฏู ุงูุชุฏูู.
                        </div>
                        <div class="input-group">
                            <label for="tank-shape">ุดูู ุงูุฎุฒุงู</label>
                            <select id="tank-shape">
                                <option value="cube">ููุนุจ</option>
                                <option value="cylinder">ุฃุณุทูุงูู</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="tank-length">ุงูุทูู (ูุชุฑ) / ุงููุทุฑ (ูุชุฑ)</label>
                            <input type="number" id="tank-length" placeholder="ููููุนุจ: ุงูุทูู / ููุฃุณุทูุงูู: ุงููุทุฑ"
                                min="0.1">
                        </div>
                        <div class="input-group" id="tank-width-group">
                            <label for="tank-width">ุงูุนุฑุถ (ูุชุฑ)</label>
                            <input type="number" id="tank-width" placeholder="ุงูุนุฑุถ ุจุงููุชุฑ" min="0.1">
                        </div>
                        <div class="input-group">
                            <label for="tank-height">ุงูุงุฑุชูุงุน (ูุชุฑ)</label>
                            <input type="number" id="tank-height" placeholder="ุงูุงุฑุชูุงุน ุจุงููุชุฑ" min="0.1">
                        </div>
                        <div class="input-group">
                            <label for="tank-flow-rate">ุชุฏูู ุงูููุงู (ูยณ/ุณุงุนุฉ)</label>
                            <input type="number" id="tank-flow-rate" placeholder="ูุนุฏู ุชุฏูู ุงูููุงู ูุชูุฑูุบ ุงูุฎุฒุงู"
                                min="0.1">
                        </div>
                        <button id="calculate-tank-btn">ุงุญุณุจ ุงูุณุนุฉ ูุงูููุช</button>
                        <div class="result" id="tank-result">ุงููุชุงุฆุฌ: ...</div>
                        <div class="history" id="tank-history">
                            <h3>ุณุฌู ุงูุญุณุงุจุงุช (ุขุฎุฑ 5)</h3>
                            <div id="tank-history-items"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title" data-modal-target="modal-resistance-voltage-drop">๐ ุญุงุณุจุฉ ูุณุงุญุฉ ููุทุน ุงูููุตู
                (ููุฏ ุงูุฌูุฏ)</h2>
            <div id="modal-resistance-voltage-drop" class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h2>๐ ุญุงุณุจุฉ ูุณุงุญุฉ ููุทุน ุงูููุตู (ููุฏ ุงูุฌูุฏ)</h2>
                    <div class="calculator" id="resistance-voltage-drop">
                        <div class="calculator-description">
                            ุงุญุณุจ ูุณุงุญุฉ ุงูููุทุน ุงูุนุฑุถู ุงููุทููุจุฉ ููููุตู ูุถูุงู ุฃู ููุฏ ุงูุฌูุฏ ูุง ูุชุฌุงูุฒ ุงููุณุจุฉ ุงููุณููุญ ุจูุงุ ูุน
                            ูุฑุงุนุงุฉ ููุน ุงูุทูุฑ ููุนุงูู ุงููุฏุฑุฉ.
                        </div>
                        <div class="input-group">
                            <label for="rvd-voltage">ุงูุฌูุฏ ุงูููุฑุจุงุฆู (V)</label>
                            <input type="number" id="rvd-voltage" placeholder="ุงูุฌูุฏ ุจุงููููุช" min="1">
                        </div>
                        <div class="input-group">
                            <label for="rvd-current">ุงูุชูุงุฑ ุงูููุฑุจุงุฆู (A)</label>
                            <input type="number" id="rvd-current" placeholder="ุงูุชูุงุฑ ุจุงูุฃูุจูุฑ" min="0.1">
                        </div>
                        <div class="input-group">
                            <label for="rvd-phase">ููุน ุงูุทูุฑ</label>
                            <select id="rvd-phase">
                                <option value="single">ุฃุญุงุฏู ุงูุทูุฑ</option>
                                <option value="three">ุซูุงุซู ุงูุทูุฑ</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="rvd-power-factor">ูุนุงูู ุงููุฏุฑุฉ (cos ฯ)</label>
                            <input type="number" id="rvd-power-factor" value="0.8" step="0.01" min="0.1" max="1"
                                placeholder="ูุซุงู: 0.8">
                        </div>
                        <div class="input-group">
                            <label for="rvd-material">ููุน ุงููุงุฏุฉ</label>
                            <select id="rvd-material">
                                <option value="copper">ูุญุงุณ (0.0172 ฮฉยทmmยฒ/m)</option>
                                <option value="aluminum">ุฃูููููู (0.0282 ฮฉยทmmยฒ/m)</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="rvd-length">ุทูู ุงูููุตู (ูุชุฑ) - (ุทูู ูู ุงุชุฌุงู ูุงุญุฏ)</label>
                            <input type="number" id="rvd-length" placeholder="ุทูู ุงููุงุจู ุจุงููุชุฑ" min="0.1">
                        </div>
                        <div class="input-group">
                            <label for="rvd-allowed-voltage-drop-percentage">ุงูุญุฏ ุงูุฃูุตู ูููุฏ ุงูุฌูุฏ ุงููุณููุญ ุจู (%)</label>
                            <input type="number" id="rvd-allowed-voltage-drop-percentage" value="3" min="0.1" max="10"
                                step="0.1" placeholder="ูุซุงู: 3 (3%)">
                        </div>
                        <button id="calculate-rvd-btn">ุงุญุณุจ ูุณุงุญุฉ ุงูููุทุน</button>
                        <div class="result" id="rvd-result">ุงููุชุงุฆุฌ: ...</div>
                        <div class="history" id="rvd-history">
                            <h3>ุณุฌู ุงูุญุณุงุจุงุช (ุขุฎุฑ 5)</h3>
                            <div id="rvd-history-items"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title" data-modal-target="modal-capacitor-calculator">โก ุญุณุงุจ ุณุนุฉ ุงูููุซู ูุชุญุณูู ูุนุงูู
                ุงููุฏุฑุฉ</h2>
            <div id="modal-capacitor-calculator" class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h2>โก ุญุณุงุจ ุณุนุฉ ุงูููุซู ูุชุญุณูู ูุนุงูู ุงููุฏุฑุฉ</h2>
                    <div class="calculator" id="capacitor-calculator">
                        <div class="calculator-description">
                            ุญุณุงุจ ุณุนุฉ ุงูููุซู ุงููุทููุจุฉ (ยตF) ูุชุญุณูู ูุนุงูู ุงููุฏุฑุฉ ูู ุงูุฏูุงุฆุฑ ุงูููุฑุจุงุฆูุฉุ ูุน ุฅููุงููุฉ ุชุญุฏูุฏ
                            ุงูุชุฑุฏุฏ ูููุน ุงูุทูุฑ.
                        </div>
                        <div class="input-group">
                            <label for="cap-voltage">ุฌูุฏ ุงูุชุดุบูู (V)</label>
                            <input type="number" id="cap-voltage" placeholder="ุฌูุฏ ุงูุชุดุบูู ุจุงููููุช" min="1">
                        </div>
                        <div class="input-group">
                            <label for="cap-phase">ููุน ุงูุทูุฑ</label>
                            <select id="cap-phase">
                                <option value="single">ุฃุญุงุฏู ุงูุทูุฑ</option>
                                <option value="three">ุซูุงุซู ุงูุทูุฑ</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="cap-real-power">ุงููุฏุฑุฉ ุงูุญููููุฉ (kW)</label>
                            <input type="number" id="cap-real-power" placeholder="ุงููุฏุฑุฉ ุจุงููููููุงุท" min="0.1">
                        </div>
                        <div class="input-group">
                            <label for="cap-current-pf">ูุนุงูู ุงููุฏุฑุฉ ุงูุญุงูู (cos ฯ)</label>
                            <input type="number" id="cap-current-pf" placeholder="ูุซุงู: 0.7" min="0.1" max="0.99"
                                step="0.01">
                        </div>
                        <div class="input-group">
                            <label for="cap-desired-pf">ูุนุงูู ุงููุฏุฑุฉ ุงููุณุชูุฏู (cos ฯ^)</label>
                            <input type="number" id="cap-desired-pf" placeholder="ูุซุงู: 0.95" min="0.1" max="0.99"
                                step="0.01">
                        </div>
                        <div class="input-group">
                            <label for="cap-frequency">ุงูุชุฑุฏุฏ (Hz)</label>
                            <input type="number" id="cap-frequency" value="50" min="1" step="1"
                                placeholder="ูุซุงู: 50 ุฃู 60">
                        </div>
                        <button id="calculate-capacitor-btn">ุงุญุณุจ ุงูุณุนุฉ</button>
                        <div class="result" id="capacitor-result">ุงูุณุนุฉ ุงููุทููุจุฉ: ...</div>
                        <div class="history" id="capacitor-history">
                            <h3>ุณุฌู ุงูุญุณุงุจุงุช (ุขุฎุฑ 5)</h3>
                            <div id="capacitor-history-items"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // ุงูุงูุชุธุงุฑ ุญุชู ูุชู ุชุญููู ูุชูุณูุฑ ูุงูู ูุณุชูุฏ HTML ูุจู ุจุฏุก ุชูููุฐ ุงูุณูุฑูุจุช
        document.addEventListener("DOMContentLoaded", function () {
            // ุงุฎุชูุงุฑ ุฌููุน ุงูุนูุงุตุฑ ุงูุชู ุชุญูู ุงูููุงุณ "section-title" (ุนูุงููู ุงูุฃูุณุงู ุงููุงุจูุฉ ููููุฑ)
            const sectionTitles = document.querySelectorAll(".section-title");
            // ุงุฎุชูุงุฑ ุฌููุน ุงูููุงูุฐ ุงูููุจุซูุฉ (modals)
            const modals = document.querySelectorAll(".modal");
            // ุงุฎุชูุงุฑ ุฌููุน ุฃุฒุฑุงุฑ ุงูุฅุบูุงู ุฏุงุฎู ุงูููุงูุฐ ุงูููุจุซูุฉ
            const closeButtons = document.querySelectorAll(".close-button");

            // ----------------------- ุฏูุงู ูุณุงุนุฏุฉ ุนุงูุฉ -----------------------

            /**
             * ุชุนุฑุถ ุฑุณุงูุฉ ุงููุชูุฌุฉ (ูุฌุงุญ/ุฎุทุฃ) ูู ุงูุนูุตุฑ ุงููุญุฏุฏ.
             * @param {string} elementId - ูุนุฑูู ุงูุนูุตุฑ ุงูุฐู ุณุชูุนุฑุถ ููู ุงููุชูุฌุฉ.
             * @param {string} message - ุงูุฑุณุงูุฉ ุงููุฑุงุฏ ุนุฑุถูุง.
             * @param {boolean} isSuccess - ุตุญูุญ ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ ุชุฏู ุนูู ูุฌุงุญุ ุฎุทุฃ ุฅุฐุง ูุงูุช ุชุฏู ุนูู ุฎุทุฃ.
             */
            function displayResult(elementId, message, isSuccess) {
                const resultElement = document.getElementById(elementId);
                // ุงูุชุญูู ูู ูุฌูุฏ ุงูุนูุตุฑ ูุจู ูุญุงููุฉ ุงูุชุนุฏูู ุนููู
                if (!resultElement) {
                    console.error(`Result element with ID '${elementId}' not found.`);
                    return;
                }
                resultElement.innerHTML = message; // ุชุนููู ูุญุชูู ุงูุฑุณุงูุฉ
                // ุชุนููู ุงูููุงุณ ุงูููุงุณุจ (success ุฃู error) ูุชูุณูู ุงููุชูุฌุฉ
                resultElement.className = `result ${isSuccess ? 'success' : 'error'}`;
            }

            /**
             * ุชุญูุธ ุจูุงูุงุช ุงููุฏุฎูุงุช ุงูุฎุงุตุฉ ุจุญุงุณุจุฉ ูุนููุฉ ูู Local Storage.
             * ูุฐุง ูุณูุญ ุจุงุณุชุนุงุฏุฉ ุขุฎุฑ ููู ุชู ุฅุฏุฎุงููุง ุนูุฏ ูุชุญ ุงูุญุงุณุจุฉ ูุฑุฉ ุฃุฎุฑู.
             * @param {string} calculatorId - ูุนุฑูู ุงูุญุงุณุจุฉ ุงููุฑูุฏ (ูุซุงู: "unit-converter").
             * @param {object} data - ูุงุฆู ูุญุชูู ุนูู ุจูุงูุงุช ุงููุฏุฎูุงุช ุงููุฑุงุฏ ุญูุธูุง.
             */
            function saveCalculatorState(calculatorId, data) {
                try {
                    // ุชุญููู ุงููุงุฆู ุฅูู ุณูุณูุฉ JSON ูุญูุธูุง ูู Local Storage ุจุงุณุชุฎุฏุงู ููุชุงุญ ูุฑูุฏ ููู ุญุงุณุจุฉ
                    localStorage.setItem(calculatorId + '_state', JSON.stringify(data));
                    console.log(`State of ${calculatorId} saved to Local Storage.`);
                } catch (e) {
                    // ุงูุชุนุงูู ูุน ุฃู ุฃุฎุทุงุก ูุฏ ุชุญุฏุซ ุฃุซูุงุก ุงูุญูุธ (ูุซู ุชุฌุงูุฒ ุงููุณุงุญุฉ ุงูุชุฎุฒูููุฉ)
                    console.error("Error saving data to localStorage:", e);
                }
            }

            /**
             * ุชุญูู ุจูุงูุงุช ุงููุฏุฎูุงุช ุงููุญููุธุฉ ูุญุงุณุจุฉ ูุนููุฉ ูู Local Storage.
             * @param {string} calculatorId - ูุนุฑูู ุงูุญุงุณุจุฉ ุงููุฑูุฏ.
             * @returns {object|null} ูุงุฆู ุงูุจูุงูุงุช ุงููุญููุธุฉ ุฃู null ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช.
             */
            function loadCalculatorState(calculatorId) {
                try {
                    const storedData = localStorage.getItem(calculatorId + '_state');
                    if (storedData) {
                        // ุชุญููู ุณูุณูุฉ JSON ุฅูู ูุงุฆู ุฌุงูุง ุณูุฑูุจุช
                        return JSON.parse(storedData);
                    }
                } catch (e) {
                    console.error("Error loading data from Local Storage:", e);
                }
                return null; // ูุง ุชูุฌุฏ ุจูุงูุงุช ูุญููุธุฉ
            }

            /**
             * ุชุถูู ุฅุฏุฎุงูุงู ุฌุฏูุฏุงู ุฅูู ุณุฌู ุงูุญุณุงุจุงุช ูุชุฏูุฑ ุนุฏุฏ ุงูุนูุงุตุฑ ูู ุงูุณุฌู (ุขุฎุฑ 5).
             * ูุชู ุญูุธ ุงูุณุฌู ูู Local Storage.
             * @param {string} historyContainerId - ูุนุฑูู ุงูุนูุตุฑ ุงูุฐู ูุนุฑุถ ุงูุณุฌู (ูุซุงู: "uc-history-items").
             * @param {string} entry - ุงููุต ุงูุฐู ููุซู ุฅุฏุฎุงู ุงูุณุฌู.
             * @param {number} maxItems - ุงูุนุฏุฏ ุงูุฃูุตู ููุนูุงุตุฑ ุงููุฑุงุฏ ุงูุงุญุชูุงุธ ุจูุง ูู ุงูุณุฌู.
             */
            function addToHistory(historyContainerId, entry, maxItems = 5) {
                const historyContainer = document.getElementById(historyContainerId);
                if (!historyContainer) {
                    console.error(`History container with ID '${historyContainerId}' not found.`);
                    return;
                }

                // ุฅูุดุงุก ููุชุงุญ ูุฑูุฏ ูุณุฌู ูู ุญุงุณุจุฉ ูู Local Storage
                let historyKey = historyContainerId + '_data';
                let history = [];
                try {
                    // ูุญุงููุฉ ุชุญููู ุงูุณุฌู ุงูุญุงูู ูู Local Storage
                    const storedHistory = localStorage.getItem(historyKey);
                    if (storedHistory) {
                        history = JSON.parse(storedHistory);
                    }
                } catch (e) {
                    console.error("Error loading history from localStorage:", e);
                }

                history.unshift(entry); // ุฃุถู ุงูุนูุตุฑ ุงูุฌุฏูุฏ ูู ุจุฏุงูุฉ ุงููุตูููุฉ (ูุฌุนู ุงูุฃุญุฏุซ ูุธูุฑ ุฃููุงู)

                // ูุต ุงููุตูููุฉ ุฅุฐุง ุชุฌุงูุฒุช ุงูุญุฏ ุงูุฃูุตู ููุนูุงุตุฑ
                if (history.length > maxItems) {
                    history = history.slice(0, maxItems);
                }

                try {
                    // ุญูุธ ุงูุณุฌู ุงููุญุฏุซ ูุฑุฉ ุฃุฎุฑู ูู Local Storage
                    localStorage.setItem(historyKey, JSON.stringify(history));
                } catch (e) {
                    console.error("Error saving history to localStorage:", e);
                }

                renderHistory(historyContainer, history); // ุชุญุฏูุซ ุนุฑุถ ุงูุณุฌู ุนูู ุงููุงุฌูุฉ
            }

            /**
             * ูุนุฑุถ ุนูุงุตุฑ ุงูุณุฌู ุงูููุฌูุฏุฉ ูู ุงููุตูููุฉ ุฏุงุฎู ุนูุตุฑ HTML ุงููุญุฏุฏ.
             * ูุฐู ุงูุฏุงูุฉ ููุนุฑุถ ููุท ููุง ุชููู ุจุงูุญูุธ.
             * @param {HTMLElement} historyContainer - ุงูุนูุตุฑ ุงูุฐู ุณูุนุฑุถ ุงูุณุฌู.
             * @param {string[]} historyArray - ูุตูููุฉ ุงููุตูุต ุงูุชู ุชูุซู ุนูุงุตุฑ ุงูุณุฌู.
             */
            function renderHistory(historyContainer, historyArray) {
                historyContainer.innerHTML = ''; // ูุณุญ ุงููุญุชูู ุงูุญุงูู ููุนุฑุถ
                historyArray.forEach(itemText => {
                    const historyItem = document.createElement("div");
                    historyItem.className = "history-item"; // ุชุทุจูู ููุงุณ ุงูุชูุณูู
                    historyItem.textContent = itemText; // ุชุนููู ูุต ุงูุนูุตุฑ
                    historyContainer.appendChild(historyItem); // ุฅุถุงูุฉ ุงูุนูุตุฑ ุฅูู ุงูุญุงููุฉ
                });
            }

            /**
             * ุชุญูู ุงูุณุฌู ุงูุฎุงุต ุจุญุงุณุจุฉ ูุนููุฉ ูู Local Storage ูุชุนุฑุถู.
             * ุชูุณุชุฎุฏู ุนูุฏ ูุชุญ ุงูููุฏุงู ูุถูุงู ุชุญุฏูุซ ุงูุณุฌู ุงููุนุฑูุถ.
             * @param {string} historyContainerId - ูุนุฑูู ุงูุนูุตุฑ ุงูุฐู ูุนุฑุถ ุงูุณุฌู.
             */
            function loadAndRenderHistory(historyContainerId) {
                const historyContainer = document.getElementById(historyContainerId);
                if (!historyContainer) {
                    console.error(`History container with ID '${historyContainerId}' not found.`);
                    return;
                }

                let historyKey = historyContainerId + '_data';
                let history = [];
                try {
                    const storedHistory = localStorage.getItem(historyKey);
                    if (storedHistory) {
                        history = JSON.parse(storedHistory);
                    }
                } catch (e) {
                    console.error("Error loading history from localStorage:", e);
                }
                renderHistory(historyContainer, history); // ุนุฑุถ ุงูุณุฌู ุงููุญูู
            }

            /**
             * ูููุฃ ุญููู ุงูุฅุฏุฎุงู ูู ุงูุญุงุณุจุฉ ุจุงูุจูุงูุงุช ุงููุญููุธุฉ.
             * ูุชู ุชุทุจูู ุงูููู ุงูุงูุชุฑุงุถูุฉ ุฃููุงู ุซู ุงูููู ุงููุญููุธุฉ (ุฅุฐุง ูุฌุฏุช).
             * @param {string} calculatorId - ูุนุฑูู ุงูุญุงุณุจุฉ.
             * @param {object} inputsData - ูุงุฆู ูุญุชูู ุนูู ุจูุงูุงุช ุงููุฏุฎูุงุช ุงููุฑุงุฏ ุญูุธูุง.
             * @param {HTMLElement} targetElement - ุงูุนูุตุฑ ุงูุฃุจ ุงูุฐู ูุญุชูู ุนูู ุงููุฏุฎูุงุช (ุนุงุฏุฉู ุงูููุฏุงู).
             */
            function populateInputs(calculatorId, inputsData, targetElement) {
                if (!targetElement || !inputsData) return;

                // ุชุนุฑูู ุงูููู ุงูุงูุชุฑุงุถูุฉ ููู ุญุงุณุจุฉ.
                // ูุฐู ุงูููู ุชูุณุชุฎุฏู ุฅุฐุง ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ูุญููุธุฉ ูู Local Storage.
                const currentDefaultValues = {
                    'unit-converter': {
                        'uc-power-factor': "0.8",
                        'uc-input-unit': "kw",
                        'uc-phase': "single"
                    },
                    'tank-calculator': {
                        'tank-shape': "cube"
                    },
                    'resistance-voltage-drop': {
                        'rvd-material': "copper",
                        'rvd-allowed-voltage-drop-percentage': "3",
                        'rvd-phase': "single",
                        'rvd-power-factor': "0.8"
                    },
                    'flow-converter': {
                        'flow-conversion-type': "m3h-to-lps"
                    },
                    'capacitor-calculator': {
                        'cap-current-pf': "0.7",
                        'cap-desired-pf': "0.95",
                        'cap-frequency': "50",
                        'cap-phase': "single"
                    },
                    'solar-panels-calculator': {
                        'solar-performance-factor': "80",
                        'inverter-efficiency': "90",
                        'pump-voltage': "230",
                        'pump-phase': "single",
                        'pump-power-factor': "0.8",
                        'ideal-series-voltage': ""
                    },
                    'battery-calculator': {
                        'battery-dod': "80",
                        'battery-efficiency': "90",
                        'battery-device-type': "dc",
                        'battery-device-phase': "single",
                        'battery-device-power-factor': "0.8",
                        'inverter-efficiency-battery': "90"
                    },
                    'pulley-calculator': {
                        'pulley-d1': "",
                        'pulley-rpm1': "",
                        'pulley-d2': "",
                        'pulley-rpm2': ""
                    }
                };

                // ุฃููุงูุ ุชุทุจูู ุงูููู ุงูุงูุชุฑุงุถูุฉ ุฅุฐุง ูุงูุช ููุฌูุฏุฉ ููุญุงุณุจุฉ ุงูุญุงููุฉ
                if (currentDefaultValues[calculatorId]) {
                    for (const defaultKey in currentDefaultValues[calculatorId]) {
                        const defaultInputElement = targetElement.querySelector(`#${defaultKey}`);
                        if (defaultInputElement) {
                            defaultInputElement.value = currentDefaultValues[calculatorId][defaultKey];
                        }
                    }
                }

                // ุซู ููุก ุงูุญููู ุจุงูุจูุงูุงุช ุงููุญููุธุฉุ ูุชุฌุงูุฒุฉ ุงูููู ุงูุงูุชุฑุงุถูุฉ ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ุงููุญููุธุฉ ููุฌูุฏุฉ
                for (const key in inputsData) {
                    // ุชุญุฏูุฏ ูุนุฑู ุงูุนูุตุฑ ุจูุงุกู ุนูู ุงุณู ุงูููุชุงุญ ูููุน ุงูุญุงุณุจุฉ
                    let inputElementId = key.replace(/([A-Z])/g, '-$1').toLowerCase(); // ุชุญููู camelCase ุฅูู kebab-case

                    // ูุนุงูุฌุฉ ุฎุงุตุฉ ูุจุนุถ ุงููุนุฑูุงุช ุงูุชู ูุง ุชุชุจุน ููุท ุงูุชุญููู ุงููุจุงุดุฑ
                    if (calculatorId === 'unit-converter') {
                        if (key === 'voltage') inputElementId = 'uc-voltage';
                        else if (key === 'inputValue') inputElementId = 'uc-input-value';
                        else if (key === 'inputUnit') inputElementId = 'uc-input-unit';
                        else if (key === 'powerFactor') inputElementId = 'uc-power-factor';
                        else if (key === 'phase') inputElementId = 'uc-phase';
                    } else if (calculatorId === 'solar-panels-calculator') {
                        if (key === 'pumpPowerKw') inputElementId = 'pump-power-kw';
                        else if (key === 'pumpVoltage') inputElementId = 'pump-voltage';
                        else if (key === 'pumpPhase') inputElementId = 'pump-phase';
                        else if (key === 'pumpPowerFactor') inputElementId = 'pump-power-factor';
                        else if (key === 'panelVoltage') inputElementId = 'panel-voltage';
                        else if (key === 'panelCurrent') inputElementId = 'panel-current';
                        else if (key === 'solarPerformanceFactor') inputElementId = 'solar-performance-factor';
                        else if (key === 'inverterEfficiency') inputElementId = 'inverter-efficiency';
                        else if (key === 'idealSeriesVoltage') inputElementId = 'ideal-series-voltage';
                    } else if (calculatorId === 'battery-calculator') {
                        if (key === 'deviceType') inputElementId = 'battery-device-type';
                        else if (key === 'devicePhase') inputElementId = 'battery-device-phase';
                        else if (key === 'devicePowerFactor') inputElementId = 'battery-device-power-factor';
                        else if (key === 'inverterEfficiencyBattery') inputElementId = 'inverter-efficiency-battery';
                        else if (key === 'deviceVoltage') inputElementId = 'device-voltage';
                        else if (key === 'deviceCurrent') inputElementId = 'device-current';
                        else if (key === 'operationDuration') inputElementId = 'operation-duration';
                        else if (key === 'batteryVoltage') inputElementId = 'battery-voltage';
                        else if (key === 'dod') inputElementId = 'battery-dod';
                        else if (key === 'efficiency') inputElementId = 'battery-efficiency';
                    } else if (calculatorId === 'percentage-calculator') {
                        if (key === 'originalNumber') inputElementId = 'original-number';
                        else if (key === 'percentageValue') inputElementId = 'percentage-value';
                    } else if (calculatorId === 'capacitor-calculator') {
                        if (key === 'voltage') inputElementId = 'cap-voltage';
                        else if (key === 'realPowerKW') inputElementId = 'cap-real-power';
                        else if (key === 'currentPF') inputElementId = 'cap-current-pf';
                        else if (key === 'desiredPF') inputElementId = 'cap-desired-pf';
                        else if (key === 'frequency') inputElementId = 'cap-frequency';
                        else if (key === 'phase') inputElementId = 'cap-phase';
                    } else if (calculatorId === 'flow-converter') {
                        if (key === 'inputValue') inputElementId = 'flow-input-value';
                        else if (key === 'conversionType') inputElementId = 'flow-conversion-type';
                    } else if (calculatorId === 'tank-calculator') {
                        if (key === 'tankShape') inputElementId = 'tank-shape';
                        else if (key === 'lengthOrDiameter') inputElementId = 'tank-length';
                        else if (key === 'width') inputElementId = 'tank-width';
                        else if (key === 'height') inputElementId = 'tank-height';
                        else if (key === 'flowRateM3H') inputElementId = 'tank-flow-rate';
                    } else if (calculatorId === 'resistance-voltage-drop') {
                        if (key === 'voltage') inputElementId = 'rvd-voltage';
                        else if (key === 'current') inputElementId = 'rvd-current';
                        else if (key === 'material') inputElementId = 'rvd-material';
                        else if (key === 'length') inputElementId = 'rvd-length';
                        else if (key === 'allowedVoltageDropPercentage') inputElementId = 'rvd-allowed-voltage-drop-percentage';
                        else if (key === 'phase') inputElementId = 'rvd-phase';
                        else if (key === 'powerFactor') inputElementId = 'rvd-power-factor';
                    } else if (calculatorId === 'pulley-calculator') {
                        if (key === 'd1') inputElementId = 'pulley-d1';
                        else if (key === 'rpm1') inputElementId = 'pulley-rpm1';
                        else if (key === 'd2') inputElementId = 'pulley-d2';
                        else if (key === 'rpm2') inputElementId = 'pulley-rpm2';
                    }

                    const inputElement = targetElement.querySelector(`#${inputElementId}`);
                    // ุงูุชุญูู ูู ูุฌูุฏ ุงูุนูุตุฑ ููููุชู ูุจู ุชุนููููุง.
                    // ูุชู ุงูุชุญูู ูู "null" ู "undefined" ููุณูุงุญ ุจุญููู ูุงุฑุบุฉ ูู ุจุนุถ ุงูุญุงุณุจุงุช (ูุซู ุงูุจูุฑุฉ).
                    if (inputElement && (inputElement.type === 'number' || inputElement.type === 'text' || inputElement.tagName === 'SELECT') && inputsData[key] !== null && inputsData[key] !== undefined) {
                        inputElement.value = inputsData[key];
                    }
                }

                // ุชุดุบูู ุญุฏุซ "change" ูุฏููุงู ูุจุนุถ ุญููู ุงูู select ุงูุชู ุชุคุซุฑ ุนูู ุนุฑุถ ุญููู ุฃุฎุฑู.
                // ูุฐุง ูุถูู ุชุญุฏูุซ ุงููุงุฌูุฉ ุจุดูู ุตุญูุญ ุจุนุฏ ุชุญููู ุงูุจูุงูุงุช.
                if (calculatorId === 'tank-calculator') {
                    const tankShapeSelect = targetElement.querySelector('#tank-shape');
                    if (tankShapeSelect) {
                        const event = new Event('change');
                        tankShapeSelect.dispatchEvent(event);
                    }
                }
                if (calculatorId === 'battery-calculator') {
                    const deviceTypeSelect = targetElement.querySelector('#battery-device-type');
                    if (deviceTypeSelect) {
                        const event = new Event('change');
                        deviceTypeSelect.dispatchEvent(event);
                    }
                }
            }


            // ----------------------- ุชุนุฑูู ูุธุงุฆู ุงูุญุณุงุจ ููู ุญุงุณุจุฉ -----------------------
            // ุชู ุชุฌููุนูุง ูู ูุงุฆู ูุณูููุฉ ุงููุตูู ุฅูููุง ูุฅุฏุงุฑุชูุง.
            const calculatorFunctions = {
                "unit-converter": {
                    calculate: function () {
                        // ุฌูุจ ุงูููู ูู ุญููู ุงูุฅุฏุฎุงู ูุชุญููููุง ุฅูู ุฃุฑูุงู
                        const voltage = parseFloat(document.getElementById("uc-voltage").value);
                        const phase = document.getElementById("uc-phase").value;
                        const powerFactor = parseFloat(document.getElementById("uc-power-factor").value);
                        const inputValue = parseFloat(document.getElementById("uc-input-value").value);
                        const inputUnit = document.getElementById("uc-input-unit").value;

                        // ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช ูุฅุธูุงุฑ ุฑุณุงูุฉ ุฎุทุฃ ุฅุฐุง ูุงูุช ุบูุฑ ุตุงูุญุฉ
                        if (isNaN(voltage) || voltage <= 0) { displayResult("uc-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฌูุฏ ุตุญูุญ ูููุฌุจ.", false); return; }
                        if (isNaN(powerFactor) || powerFactor <= 0.1 || powerFactor > 1) { displayResult("uc-result", "ูุนุงูู ุงููุฏุฑุฉ ูุฌุจ ุฃู ูููู ุจูู 0.1 ู 1.", false); return; }
                        if (isNaN(inputValue) || inputValue < 0) { displayResult("uc-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุฉ ุตุญูุญุฉ ูููุฌุจุฉ ููุชุญููู.", false); return; }

                        const sqrt3 = Math.sqrt(3); // ูููุฉ ุงูุฌุฐุฑ ุงูุชุฑุจูุนู ูู 3 (ููุฃูุธูุฉ ุซูุงุซูุฉ ุงูุทูุฑ)
                        const HP_TO_KW_FACTOR = 0.7457; // ุนุงูู ุงูุชุญููู ูู ุญุตุงู ุฅูู ูููููุงุท

                        let kw = 0, kva = 0, hp = 0, amp = 0;
                        let basePowerWatts = 0; // ุงููุฏุฑุฉ ุงูุญููููุฉ ุจุงููุงุท
                        let baseApparentPowerVA = 0; // ุงููุฏุฑุฉ ุงูุธุงูุฑูุฉ ุจุงููููุช ุฃูุจูุฑ

                        // ุญุณุงุจ ุงููุฏุฑุงุช ุจูุงุกู ุนูู ุงููุญุฏุฉ ุงููุฏุฎูุฉ
                        switch (inputUnit) {
                            case 'kw':
                                basePowerWatts = inputValue * 1000; // ุชุญููู ูููููุงุท ุฅูู ูุงุท
                                baseApparentPowerVA = basePowerWatts / powerFactor; // S = P / PF
                                break;
                            case 'kva':
                                baseApparentPowerVA = inputValue * 1000; // ุชุญููู ูููู ูููุช ุฃูุจูุฑ ุฅูู ูููุช ุฃูุจูุฑ
                                basePowerWatts = baseApparentPowerVA * powerFactor; // P = S * PF
                                break;
                            case 'hp':
                                basePowerWatts = inputValue * HP_TO_KW_FACTOR * 1000; // ุชุญููู ุญุตุงู ุฅูู ูุงุท
                                baseApparentPowerVA = basePowerWatts / powerFactor;
                                break;
                            case 'amp':
                                // ุญุณุงุจ ุงููุฏุฑุฉ ุงูุธุงูุฑูุฉ ูู ุงูุชูุงุฑ ูุงูุฌูุฏ ุญุณุจ ููุน ุงูุทูุฑ
                                if (phase === "single") {
                                    baseApparentPowerVA = voltage * inputValue; // S = V * I (ุฃุญุงุฏู ุงูุทูุฑ)
                                } else {
                                    baseApparentPowerVA = sqrt3 * voltage * inputValue; // S = sqrt(3) * V * I (ุซูุงุซู ุงูุทูุฑ)
                                }
                                basePowerWatts = baseApparentPowerVA * powerFactor;
                                break;
                        }

                        // ุชุญููู ุงูููู ุงููุญุณูุจุฉ ุฅูู ุงููุญุฏุงุช ุงููุทููุจุฉ (ูููููุงุทุ ูููู ูููุช ุฃูุจูุฑุ ุญุตุงูุ ุฃูุจูุฑ)
                        kw = basePowerWatts / 1000;
                        kva = baseApparentPowerVA / 1000;
                        hp = kw / HP_TO_KW_FACTOR;

                        // ุญุณุงุจ ุงูุชูุงุฑ ุจูุงุกู ุนูู ุงููุฏุฑุฉ ุงูุธุงูุฑูุฉ ูุงูุฌูุฏ ูููุน ุงูุทูุฑ
                        if (voltage === 0) {
                            displayResult("uc-result", "ุฎุทุฃ ูู ุงูุฌูุฏ ุงูููุฑุจุงุฆู. ูุง ูููู ุฃู ูููู ุตูุฑูุง.", false); return;
                        }
                        if (phase === "single") {
                            amp = baseApparentPowerVA / voltage;
                        } else {
                            if (sqrt3 * voltage === 0) {
                                displayResult("uc-result", "ุฎุทุฃ ูู ุงูุฌูุฏ ุงูููุฑุจุงุฆู ููุทูุฑ ุงูุซูุงุซู. ูุง ูููู ุฃู ูููู ุตูุฑูุง.", false); return;
                            }
                            amp = baseApparentPowerVA / (sqrt3 * voltage);
                        }

                        // ุจูุงุก ุฑุณุงูุฉ ุงููุชูุฌุฉ ุงูููุตูุฉ ูุนุฑุถูุง
                        const resultMessage = `
                            <p><strong>ูููุฉ ุงูุฅุฏุฎุงู ุงูุฃุตููุฉ:</strong> ${inputValue.toFixed(2)} ${inputUnit.toUpperCase()}</p>
                            <p><strong>ุงูุฌูุฏ ุงููุณุชุฎุฏู:</strong> ${voltage.toFixed(0)} V, <strong>ุงูุทูุฑ:</strong> ${phase === "single" ? "ุฃุญุงุฏู" : "ุซูุงุซู"}, <strong>ูุนุงูู ุงููุฏุฑุฉ:</strong> ${powerFactor.toFixed(2)}</p>
                            <h3>ุงููุชุงุฆุฌ ุงููุญูููุฉ:</h3>
                            <ul>
                                <li>ุงููุฏุฑุฉ ุงูุญููููุฉ (Real Power): <strong>${kw.toFixed(2)} kW</strong></li>
                                <li>ุงููุฏุฑุฉ ุงูุธุงูุฑูุฉ (Apparent Power): <strong>${kva.toFixed(2)} kVA</strong></li>
                                <li>ุงููุฏุฑุฉ ุจุงูุญุตุงู (Horsepower): <strong>${hp.toFixed(2)} HP</strong></li>
                                <li>ุงูุชูุงุฑ ุงูููุฑุจุงุฆู (Current): <strong>${amp.toFixed(2)} A</strong></li>
                            </ul>
                            <p><small>ููุงุญุธุฉ: ุชูุญุณุจ ุงููุฏุฑุฉ ุจุงูุญุตุงู ุจูุงุกู ุนูู 1 ุญุตุงู = 0.7457 ูููููุงุท.</small></p>
                        `;
                        displayResult("uc-result", resultMessage, true); // ุนุฑุถ ุงููุชูุฌุฉ ุจูุฌุงุญ

                        // ุญูุธ ุจูุงูุงุช ุงููุฏุฎูุงุช ูู Local Storage
                        const dataToSave = {
                            inputs: {
                                voltage: voltage,
                                phase: phase,
                                powerFactor: powerFactor,
                                inputValue: inputValue,
                                inputUnit: inputUnit
                            }
                        };
                        saveCalculatorState("unit-converter", dataToSave);
                        // ุฅุถุงูุฉ ุงูุนูููุฉ ุฅูู ุณุฌู ุงูุญุณุงุจุงุช
                        addToHistory("uc-history-items", `ุงููุฏุฎู: ${inputValue} ${inputUnit.toUpperCase()}, ุงูุฌูุฏ: ${voltage}V, ุงูุทูุฑ: ${phase === "single" ? "ุฃุญุงุฏู" : "ุซูุงุซู"}, PF: ${powerFactor} โ kW: ${kw.toFixed(2)}, kVA: ${kva.toFixed(2)}, HP: ${hp.toFixed(2)}, A: ${amp.toFixed(2)}`);
                    },
                },

                "solar-panels-calculator": {
                    calculate: function () {
                        // ุฌูุจ ุงููุฏุฎูุงุช
                        const pumpPowerKw = parseFloat(document.getElementById("pump-power-kw").value); // ูุฏุฑุฉ ุงููุถุฎุฉ ุจุงููููููุงุท
                        const pumpVoltage = parseFloat(document.getElementById("pump-voltage").value); // ุฌูุฏ ุงููุถุฎุฉ (ูุนูููุงุชู)
                        const pumpPhase = document.getElementById("pump-phase").value; // ุทูุฑ ุงููุถุฎุฉ (ูุนูููุงุชู)
                        const pumpPowerFactor = parseFloat(document.getElementById("pump-power-factor").value); // ูุนุงูู ูุฏุฑุฉ ุงููุถุฎุฉ (ูุนูููุงุชู)
                       
                        const idealSeriesVoltage = parseFloat(document.getElementById("ideal-series-voltage").value); // ุงูุชูุชุฑ ุงููุซุงูู ููุฃููุงุญ ุนูู ุงูุชูุงูู
                        const panelVoltage = parseFloat(document.getElementById("panel-voltage").value); // ุฌูุฏ ุงูููุญ ุนูุฏ ุฃูุตู ููุทุฉ ูุฏุฑุฉ (Vmp)
                        const panelCurrent = parseFloat(document.getElementById("panel-current").value); // ุชูุงุฑ ุงูููุญ ุนูุฏ ุฃูุตู ููุทุฉ ูุฏุฑุฉ (Imp)
                        const solarPerformanceFactor = parseFloat(document.getElementById("solar-performance-factor").value) / 100;
                        const inverterEfficiency = parseFloat(document.getElementById("inverter-efficiency").value) / 100;

                        // ----------------------- ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช -----------------------
                        if (isNaN(pumpPowerKw) || pumpPowerKw <= 0) { displayResult("solar-panels-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ูุฏุฑุฉ ูุถุฎุฉ ุตุญูุญุฉ ูููุฌุจุฉ ุจุงููููููุงุท.", false); return; }
                        // ุงูุชุญูู ูู ุงูุญููู ุงููุนูููุงุชูุฉ (ููููู ุฌุนููุง ุงุฎุชูุงุฑูุฉ ุฅุฐุง ุฃุฑุฏุช)
                        if (isNaN(pumpVoltage) || pumpVoltage <= 0) { displayResult("solar-panels-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฌูุฏ ูุถุฎุฉ ุตุญูุญ ูููุฌุจ.", false); return; }
                        if (isNaN(pumpPowerFactor) || pumpPowerFactor <= 0.1 || pumpPowerFactor > 1) { displayResult("solar-panels-result", "ูุนุงูู ูุฏุฑุฉ ุงููุถุฎุฉ ูุฌุจ ุฃู ูููู ุจูู 0.1 ู 1.", false); return; }

                        if (isNaN(panelVoltage) || panelVoltage <= 0) { displayResult("solar-panels-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฌูุฏ ููุญ ุดูุณู ุตุญูุญ ูููุฌุจ.", false); return; }
                        if (isNaN(panelCurrent) || panelCurrent <= 0) { displayResult("solar-panels-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุชูุงุฑ ููุญ ุดูุณู ุตุญูุญ ูููุฌุจ.", false); return; }
                        if (isNaN(solarPerformanceFactor) || solarPerformanceFactor <= 0 || solarPerformanceFactor > 1) { displayResult("solar-panels-result", "ุนุงูู ุฃุฏุงุก ุงูุฃููุงุญ ูุฌุจ ุฃู ูููู ุจูู 50% ู 100%.", false); return; }
                        if (isNaN(inverterEfficiency) || inverterEfficiency <= 0 || inverterEfficiency > 1) { displayResult("solar-panels-result", "ููุงุกุฉ ุงููุญูู ูุฌุจ ุฃู ุชููู ุจูู 50% ู 100%.", false); return; }
                        if (isNaN(idealSeriesVoltage) || idealSeriesVoltage <= 0) { displayResult("solar-panels-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุงูุชูุชุฑ ุงููุซุงูู ููุฃููุงุญ ุนูู ุงูุชูุงูู ุตุญูุญ ูููุฌุจ.", false); return; }

                        // 1. ุงููุฏุฑุฉ ุงูุญููููุฉ ูููุถุฎุฉ ุจุงููุงุท (P_pump_watts) - ุชูุคุฎุฐ ูุจุงุดุฑุฉ ูู ุงูุฅุฏุฎุงู ุจุงููููููุงุท
                        const pumpRealPowerWatts = pumpPowerKw * 1000;

                        // **ุงูุฌุฏูุฏ: ุญุณุงุจ ุชูุงุฑ ุงููุถุฎุฉ ุงููุนูู (AC) ุจูุงุกู ุนูู ุงููุฏุฑุฉ ุงููุฏุฎูุฉ ูุงูุฌูุฏ ูุงูุทูุฑ ููุนุงูู ุงููุฏุฑุฉ**
                        let actualPumpCurrentAC;
                        const sqrt3 = Math.sqrt(3);
                        if (pumpPhase === "single") {
                            if (pumpVoltage * pumpPowerFactor === 0) {
                                displayResult("solar-panels-result", "ุฎุทุฃ: ูุง ูููู ุญุณุงุจ ุชูุงุฑ ุงููุถุฎุฉ (AC). ุฌูุฏ ุงููุถุฎุฉ ุฃู ูุนุงูู ุงููุฏุฑุฉ ูุง ูููู ุฃู ูููู ุตูุฑูุง.", false); return;
                            }
                            actualPumpCurrentAC = pumpRealPowerWatts / (pumpVoltage * pumpPowerFactor);
                        } else { // Three-phase
                            if (sqrt3 * pumpVoltage * pumpPowerFactor === 0) {
                                displayResult("solar-panels-result", "ุฎุทุฃ: ูุง ูููู ุญุณุงุจ ุชูุงุฑ ุงููุถุฎุฉ (AC). ุฌูุฏ ุงููุถุฎุฉ ุฃู ูุนุงูู ุงููุฏุฑุฉ ูุง ูููู ุฃู ูููู ุตูุฑูุง ููุทูุฑ ุงูุซูุงุซู.", false); return;
                            }
                            actualPumpCurrentAC = pumpRealPowerWatts / (sqrt3 * pumpVoltage * pumpPowerFactor);
                        }


                        // 2. ุญุณุงุจ ุงููุฏุฑุฉ ุงูุงุณููุฉ ูููุญ ุงูุดูุณู ุงููุงุญุฏ ุจุงููุงุท (P_max = Vmp * Imp)
                        const nominalPanelPower = panelVoltage * panelCurrent;
                        if (nominalPanelPower === 0) {
                            displayResult("solar-panels-result", "ุฎุทุฃ: ูุฏุฑุฉ ุงูููุญ ุงูุดูุณู ุงูุงุณููุฉ ูุง ูููู ุฃู ุชููู ุตูุฑูุง. ุงูุฑุฌุงุก ุงูุชุญูู ูู ุฌูุฏ ูุชูุงุฑ ุงูููุญ.", false);
                            return;
                        }

                        // 3. ุญุณุงุจ ุฅุฌูุงูู ุงููุฏุฑุฉ ุงููุทููุจุฉ ูู ุงูุฃููุงุญ (DC) ูุน ุงูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฌููุน ุงูุฎุณุงุฆุฑ
                        if (inverterEfficiency * solarPerformanceFactor === 0) {
                            displayResult("solar-panels-result", "ุฎุทุฃ: ููุงุกุฉ ุงููุญูู ุฃู ุนุงูู ุฃุฏุงุก ุงูุฃููุงุญ ูุง ูููู ุฃู ูููู ุตูุฑูุง ููุญุณุงุจ ุงูููู.", false);
                            return;
                        }
                        const totalRequiredDcPowerAfterLosses = pumpRealPowerWatts / (inverterEfficiency * solarPerformanceFactor);

                        // 4. ุญุณุงุจ ุงูุนุฏุฏ ุงูุฅุฌูุงูู ููุฃููุงุญ ุงูุดูุณูุฉ ุงููุทููุจุฉ
                        const totalPanelsNeeded = Math.ceil(totalRequiredDcPowerAfterLosses / nominalPanelPower);

                        // 5. ุญุณุงุจ ุนุฏุฏ ุงูุฃููุงุญ ูู ุงูุณูุณูุฉ ุงููุงุญุฏุฉ (ุจูุงุกู ุนูู ุงูุชูุชุฑ ุงููุซุงูู)
                        if (panelVoltage === 0) {
                            displayResult("solar-panels-result", "ุฎุทุฃ: ุฌูุฏ ุงูููุญ ุงููุงุญุฏ ูุง ูููู ุฃู ูููู ุตูุฑูุง ูุญุณุงุจ ุนุฏุฏ ุงูุฃููุงุญ ูู ุงูุณูุณูุฉ.", false);
                            return;
                        }
                        const panelsInSeries = Math.ceil(idealSeriesVoltage / panelVoltage);
                        if (panelsInSeries === 0) {
                               displayResult("solar-panels-result", "ุฎุทุฃ: ุนุฏุฏ ุงูุฃููุงุญ ูู ุงูุณูุณูุฉ ูุง ูููู ุฃู ูููู ุตูุฑูุง. ุชุฃูุฏ ูู ุฃู ุงูุฌูุฏ ุงููุซุงูู ููุณูุณูุฉ ุฃูุจุฑ ูู ุฌูุฏ ุงูููุญ ุงููุงุญุฏ.", false);
                               return;
                        }

                        // 6. ุญุณุงุจ ุนุฏุฏ ุงูุณูุงุณู ุงููุชูุงุฒูุฉ
                        const parallelStrings = Math.ceil(totalPanelsNeeded / panelsInSeries);

                        // 7. ุญุณุงุจ ุงูุนุฏุฏ ุงููุนูู ุงูููู ููุฃููุงุญ ุจุนุฏ ุชูุธูููุง
                        const actualTotalPanelsInArray = panelsInSeries * parallelStrings;
                        // 8. ุญุณุงุจ ุงูุฌูุฏ ูุงูุชูุงุฑ ุงูููู ุงููุนูู ูููุธุงู (DC)
                        const actualSystemVoltageDC = panelsInSeries * panelVoltage;
                        const actualSystemCurrentDC = parallelStrings * panelCurrent;
                        // 9. ุญุณุงุจ ุงููุฏุฑุฉ ุงูุงุณููุฉ ุงููููุฉ ุงููุนููุฉ ูููุธุงู ุงูุดูุณู ุงููุฑูุจ
                        const actualSystemTotalPower = actualTotalPanelsInArray * nominalPanelPower;


                        // ุจูุงุก ุฑุณุงูุฉ ุงููุชูุฌุฉ ุงูููุตูุฉ ูุนุฑุถูุง
                        const resultMessage = `

                        <h3>ูุฏุฑุฉ ุงููุธุงู ุงูุดูุณู ุงููุนููุฉ ุงููุฑูุจุฉ:</h3>
                            <ul>
                                <li><strong>ุงูุนุฏุฏ ุงููุนูู ุงูููู ููุฃููุงุญ ูู ุงููุตูููุฉ:</strong> ${actualTotalPanelsInArray} ููุญ</li>
                                <li><strong>ุนุฏุฏ ุงูุฃููุงุญ ูู ุงูุณูุณูุฉ ุงููุงุญุฏุฉ (Series):</strong> ${panelsInSeries} ููุญ</li>
                                <li><strong>ุนุฏุฏ ุงูุณูุงุณู ุงููุชูุงุฒูุฉ (Parallel Strings):</strong> ${parallelStrings} ุณูุณูุฉ</li>
                                <li><strong>ุงูุฌูุฏ ุงูููู ููุณูุณูุฉ (Vmp_array):</strong> <strong>${actualSystemVoltageDC.toFixed(2)} V</strong></li>
                                <li><strong>ุงูุชูุงุฑ ุงูููู ููุณูุงุณู (Imp_array):</strong> <strong>${actualSystemCurrentDC.toFixed(2)} A</strong></li>
                                <li><strong>ุฌูุฏ ุงููุถุฎุฉ ุงููุฏุฎู:</strong> ${pumpVoltage} V</li>
                                <li><strong>ุชูุงุฑ ุงููุถุฎุฉ ุงูููุฏุฑ (AC):</strong> <strong>${actualPumpCurrentAC.toFixed(2)} A</strong> <small></small></li>
                                <li><strong>ูุฌููุน ุงููุฏุฑุฉ ุงูุงุณููุฉ ุงููุนููุฉ ูููุธุงู:</strong> <strong>${actualSystemTotalPower.toFixed(2)} W</strong></li>
                            </ul>

                            <hr>

                            <h3>ููุฎุต ุงูุญุณุงุจุงุช:</h3>
                            <ul>
                                <li><strong>ุงููุฏุฑุฉ ุงูุญููููุฉ ูููุถุฎุฉ ุงููุทููุจุฉ:</strong> ${pumpRealPowerWatts.toFixed(2)} W</li>
                                <li><strong>ูุฏุฑุฉ ุงูููุญ ุงููุงุญุฏ ุงูุงุณููุฉ:</strong> ${nominalPanelPower.toFixed(2)} W </li>
                                <li><strong>ุนุงูู ุฃุฏุงุก ุงูุฃููุงุญ:</strong> ${solarPerformanceFactor * 100}%</li>
                                <li><strong>ููุงุกุฉ ุงููุญูู:</strong> ${inverterEfficiency * 100}%</li>
                                <li><strong>ุงููุฏุฑุฉ ุงูุฅุฌูุงููุฉ ุงููุทููุจุฉ ูู ุงูุฃููุงุญ (DC) ุจุนุฏ ุงูุฎุณุงุฆุฑ:</strong> ${totalRequiredDcPowerAfterLosses.toFixed(2)} W</li>
                                <li><strong>ุงูุนุฏุฏ ุงูุฅุฌูุงูู ููุฃููุงุญ ุงูุดูุณูุฉ ุงููุทููุจุฉ:</strong> <span style="color: var(--success-color); font-size: 1.2em;">${totalPanelsNeeded} ููุญ</span></li>
                                <li><strong>ุงููุฏุฑุฉ ุงูุงุณููุฉ ุงูุฅุฌูุงููุฉ ููุฃููุงุญ ุงููุทููุจุฉ (ุงูุญุฏ ุงูุฃุฏูู):</strong> ${totalPanelsNeeded * nominalPanelPower.toFixed(2)} W</li>
                            </ul>
                            


                            `;

                        displayResult("solar-panels-result", resultMessage, true);

                        // ุญูุธ ุจูุงูุงุช ุงููุฏุฎูุงุช ูู Local Storage
                        const dataToSave = {
                            inputs: {
                                pumpPowerKw: pumpPowerKw,
                                pumpVoltage: pumpVoltage,
                                pumpPhase: pumpPhase,
                                pumpPowerFactor: pumpPowerFactor,
                                panelVoltage: panelVoltage,
                                panelCurrent: panelCurrent,
                                solarPerformanceFactor: parseFloat(document.getElementById("solar-performance-factor").value),
                                inverterEfficiency: parseFloat(document.getElementById("inverter-efficiency").value),
                                idealSeriesVoltage: idealSeriesVoltage
                            }
                        };
                        saveCalculatorState("solar-panels-calculator", dataToSave);
                        // ุฅุถุงูุฉ ุงูุนูููุฉ ุฅูู ุณุฌู ุงูุญุณุงุจุงุช
                        addToHistory("solar-panels-history-items", `ูุถุฎุฉ: ${pumpPowerKw}kW, ุฌูุฏ: ${pumpVoltage}V, ุทูุฑ: ${pumpPhase}, PF: ${pumpPowerFactor}, ุชูุงุฑ ุงููุถุฎุฉ ุงูููุฏุฑ: ${actualPumpCurrentAC.toFixed(2)}A, ููุญ: ${panelVoltage}V/${panelCurrent}A, ุชูุชุฑ ุณูุณูุฉ ูุซุงูู: ${idealSeriesVoltage}V โ ุฅุฌูุงูู ุงูุฃููุงุญ: ${actualTotalPanelsInArray} (${actualSystemTotalPower.toFixed(2)}W)`);
                    },
                },

                "battery-calculator": {
                    calculate: function () {
                        // ุฌูุจ ููู ุงููุฏุฎูุงุช
                        const deviceType = document.getElementById("battery-device-type").value;
                        const deviceVoltage = parseFloat(document.getElementById("device-voltage").value);
                        const deviceCurrent = parseFloat(document.getElementById("device-current").value);
                        const operationDuration = parseFloat(document.getElementById("operation-duration").value);
                        const batteryVoltage = parseFloat(document.getElementById("battery-voltage").value);
                        // ุชุญููู ุนูู ุงูุชูุฑูุบ ูููุงุกุฉ ุงูุจุทุงุฑูุฉ ุฅูู ููู ุนุดุฑูุฉ
                        const dod = parseFloat(document.getElementById("battery-dod").value) / 100;
                        const efficiency = parseFloat(document.getElementById("battery-efficiency").value) / 100;

                        // ุฌูุจ ุงูููู ุงูุฎุงุตุฉ ุจุงูุชูุงุฑ ุงููุชุฑุฏุฏ (AC) ุฅุฐุง ูุงู ููุน ุงูุฌูุงุฒ AC
                        const devicePhase = document.getElementById("battery-device-phase").value;
                        const devicePowerFactor = parseFloat(document.getElementById("battery-device-power-factor").value);
                        const inverterEfficiencyBattery = parseFloat(document.getElementById("inverter-efficiency-battery").value) / 100;

                        // ----------------------- ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช -----------------------
                        if (isNaN(deviceVoltage) || deviceVoltage <= 0) { displayResult("battery-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฌูุฏ ุฌูุงุฒ ุตุญูุญ ูููุฌุจ.", false); return; }
                        if (isNaN(deviceCurrent) || deviceCurrent <= 0) { displayResult("battery-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุชูุงุฑ ุฌูุงุฒ ุตุญูุญ ูููุฌุจ.", false); return; }
                        if (isNaN(operationDuration) || operationDuration <= 0) { displayResult("battery-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ูุฏุฉ ุชุดุบูู ุตุญูุญุฉ ูููุฌุจุฉ.", false); return; }
                        if (isNaN(batteryVoltage) || batteryVoltage <= 0) { displayResult("battery-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุชูุชุฑ ุจุทุงุฑูุฉ ุตุญูุญ ูููุฌุจ.", false); return; }
                        if (isNaN(dod) || dod <= 0 || dod > 1) { displayResult("battery-result", "ุนูู ุงูุชูุฑูุบ ุงูุฃูุตู ูุฌุจ ุฃู ูููู ุจูู 10% ู 100%.", false); return; }
                        if (isNaN(efficiency) || efficiency <= 0 || efficiency > 1) { displayResult("battery-result", "ููุงุกุฉ ุงูุจุทุงุฑูุฉ ูุฌุจ ุฃู ุชููู ุจูู 50% ู 100%.", false); return; }

                        const sqrt3 = Math.sqrt(3);

                        let devicePowerWatts; // ูุฏุฑุฉ ุงูุฌูุงุฒ ุจุงููุงุท
                        let energyRequiredFromBatteryWh_before_battery_losses; // ุงูุทุงูุฉ ุงููุทููุจุฉ ูู ุงูุจุทุงุฑูุฉ ุจุงููุงุท-ุณุงุนุฉ (ูุจู ุฎุณุงุฆุฑ ุงูุจุทุงุฑูุฉ ููุณูุง)

                        // ุญุณุงุจ ูุฏุฑุฉ ุงูุฌูุงุฒ ุจูุงุกู ุนูู ููุนู (DC ุฃู AC)
                        if (deviceType === "dc") {
                            // ูุฃุฌูุฒุฉ ุงูุชูุงุฑ ุงููุณุชูุฑ (DC): ุงููุฏุฑุฉ = ุงูุฌูุฏ ร ุงูุชูุงุฑ
                            devicePowerWatts = deviceVoltage * deviceCurrent;
                            // ุงูุทุงูุฉ ุงููุทููุจุฉ = ุงููุฏุฑุฉ ร ูุฏุฉ ุงูุชุดุบูู (ูุง ููุฌุฏ ูุญูู ููุง)
                            energyRequiredFromBatteryWh_before_battery_losses = devicePowerWatts * operationDuration;
                        } else {
                            // ูุฃุฌูุฒุฉ ุงูุชูุงุฑ ุงููุชุฑุฏุฏ (AC): ุงูุชุญูู ูู ูุฏุฎูุงุช ุฅุถุงููุฉ
                            if (isNaN(devicePowerFactor) || devicePowerFactor <= 0.1 || devicePowerFactor > 1) { displayResult("battery-result", "ูุนุงูู ูุฏุฑุฉ ุงูุฌูุงุฒ ูุฌุจ ุฃู ูููู ุจูู 0.1 ู 1.", false); return; }
                            if (isNaN(inverterEfficiencyBattery) || inverterEfficiencyBattery <= 0 || inverterEfficiencyBattery > 1) { displayResult("battery-result", "ููุงุกุฉ ุงููุญูู ูุฌุจ ุฃู ุชููู ุจูู 50% ู 100%.", false); return; }

                            // ุญุณุงุจ ุงููุฏุฑุฉ ุงูุญููููุฉ ููุฌูุงุฒ AC
                            if (devicePhase === "single") {
                                devicePowerWatts = deviceVoltage * deviceCurrent * devicePowerFactor; // P = V * I * PF (ุฃุญุงุฏู ุงูุทูุฑ)
                            } else {
                                devicePowerWatts = sqrt3 * deviceVoltage * deviceCurrent * devicePowerFactor; // P = sqrt(3) * V * I * PF (ุซูุงุซู ุงูุทูุฑ)
                            }

                            // ุญุณุงุจ ุงูุทุงูุฉ ุงููุทููุจุฉ ูู ุฌุงูุจ DC ููุจุทุงุฑูุฉุ ูุน ุงูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ููุงุกุฉ ุงููุญูู
                            if (inverterEfficiencyBattery === 0) {
                                displayResult("battery-result", "ุฎุทุฃ: ููุงุกุฉ ุงููุญูู ููุจุทุงุฑูุฉ ูุง ูููู ุฃู ุชููู ุตูุฑูุง.", false); return;
                            }
                            // ุงูุทุงูุฉ ุงููุทููุจุฉ ูู ุงูุจุทุงุฑูุฉ = (ูุฏุฑุฉ ุงูุฌูุงุฒ * ูุฏุฉ ุงูุชุดุบูู) / ููุงุกุฉ ุงููุญูู
                            energyRequiredFromBatteryWh_before_battery_losses = (devicePowerWatts * operationDuration) / inverterEfficiencyBattery;
                        }

                        // ุญุณุงุจ ุงูุณุนุฉ ุงูุงุณููุฉ ุงููุทููุจุฉ ููุจุทุงุฑูุฉ ุจุงููุงุท-ุณุงุนุฉ (Wh)
                        // nominalBatteryWhCapacity = (ุงูุทุงูุฉ ุงููุทููุจุฉ) / (ุนูู ุงูุชูุฑูุบ ุงููุณููุญ ุจู) / (ููุงุกุฉ ุงูุจุทุงุฑูุฉ)
                        let nominalBatteryWhCapacity = 0;
                        if (dod > 0 && efficiency > 0) {
                            nominalBatteryWhCapacity = energyRequiredFromBatteryWh_before_battery_losses / dod / efficiency;
                        } else {
                            displayResult("battery-result", "ุฎุทุฃ: ุนูู ุงูุชูุฑูุบ ุฃู ููุงุกุฉ ุงูุจุทุงุฑูุฉ ูุง ูููู ุฃู ูููู ุตูุฑูุง.", false); return;
                        }

                        // ุญุณุงุจ ุงูุณุนุฉ ุงูุงุณููุฉ ุงููุทููุจุฉ ููุจุทุงุฑูุฉ ุจุงูุฃูุจูุฑ-ุณุงุนุฉ (Ah)
                        // nominalBatteryAhCapacity = (ุงูุณุนุฉ ุจุงููุงุท-ุณุงุนุฉ) / (ุฌูุฏ ุงูุจุทุงุฑูุฉ)
                        let nominalBatteryAhCapacity = 0;
                        if (batteryVoltage > 0) {
                            nominalBatteryAhCapacity = nominalBatteryWhCapacity / batteryVoltage;
                        } else {
                            displayResult("battery-result", "ุฎุทุฃ: ุชูุชุฑ ุงูุจุทุงุฑูุฉ ูุง ูููู ุฃู ูููู ุตูุฑูุง.", false); return;
                        }

                        // ุญุณุงุจ ุงูุณุนุฉ ุงููุนููุฉ ููุจุทุงุฑูุฉ ุงูุชู ูููู ุงุณุชุฎุฏุงููุง (Usable Capacity)
                        const usableBatteryWhCapacity = nominalBatteryWhCapacity * dod;

                        // ุจูุงุก ุฑุณุงูุฉ ุงููุชูุฌุฉ ุงูููุตูุฉ
                        let resultMessage = `
                            <h3>ููุฎุต ุงูุญุณุงุจุงุช:</h3>
                            <ul>
                                <li><strong>ูุฏุฑุฉ ุงูุฌูุงุฒ ุงูุญููููุฉ:</strong> <strong>${devicePowerWatts.toFixed(2)} W</strong></li>
                                <li><strong>ุฅุฌูุงูู ุงูุทุงูุฉ ุงููุทููุจุฉ ูุชุดุบูู ุงูุฌูุงุฒ:</strong> <strong>${(devicePowerWatts * operationDuration).toFixed(2)} Wh</strong></li>
                        `;

                        // ุฅุถุงูุฉ ุชูุงุตูู ุฎุงุตุฉ ุจูุธุงู AC ุฅุฐุง ูุงู ุงูุฌูุงุฒ ูู ููุน AC
                        if (deviceType === "ac") {
                            resultMessage += `<li><strong>ุงูุทุงูุฉ ุงููุทููุจุฉ ูู ุฌุงูุจ DC ูู ุงูุจุทุงุฑูุฉ:</strong> <strong>${energyRequiredFromBatteryWh_before_battery_losses.toFixed(2)} Wh</strong> (ุจุนุฏ ุถูุงุน ุงููุญูู ุจูุณุจุฉ ${((1 - inverterEfficiencyBattery) * 100).toFixed(1)}%)</li>`;
                        } else {
                            resultMessage += `<li><strong>ุงูุทุงูุฉ ุงููุทููุจุฉ ูู ุงูุจุทุงุฑูุฉ (ููุทุฉ ุงูุชุญููู DC):</strong> <strong>${energyRequiredFromBatteryWh_before_battery_losses.toFixed(2)} Wh</strong></li>`;
                        }

                        resultMessage += `
                                <li><strong>ุงูุณุนุฉ ุงููุนููุฉ ููุจุทุงุฑูุฉ ุงูุชู ูููู ุงุณุชุฎุฏุงููุง (Usable Capacity):</strong> <strong>${usableBatteryWhCapacity.toFixed(2)} Wh</strong> (ุจูุงุกู ุนูู ุนูู ุงูุชูุฑูุบ ${dod * 100}%)</li>
                            </ul>
                            <h3>ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ:</h3>
                            <p><strong>ุงูุณุนุฉ ุงูุงุณููุฉ ุงููุทููุจุฉ ููุจุทุงุฑูุฉ: <span style="color: var(--success-color); font-size: 1.2em;">${nominalBatteryAhCapacity.toFixed(2)} Ah</span></strong></p>
                            <p><strong>ุงููุฏุฑุฉ ุงูุฅุฌูุงููุฉ ููุจุทุงุฑูุฉ (Wh): <span style="color: var(--success-color); font-size: 1.1em;">${nominalBatteryWhCapacity.toFixed(2)} Wh</span></strong></p>
                        `;

                        displayResult("battery-result", resultMessage, true);

                        // ุญูุธ ุจูุงูุงุช ุงููุฏุฎูุงุช ูู Local Storage
                        const dataToSave = {
                            inputs: {
                                deviceType: deviceType,
                                deviceVoltage: deviceVoltage,
                                deviceCurrent: deviceCurrent,
                                operationDuration: operationDuration,
                                batteryVoltage: batteryVoltage,
                                dod: parseFloat(document.getElementById("battery-dod").value),
                                efficiency: parseFloat(document.getElementById("battery-efficiency").value),
                                // ุญูุธ ููู AC ููุท ุฅุฐุง ูุงู ููุน ุงูุฌูุงุฒ AC
                                devicePhase: deviceType === 'ac' ? devicePhase : null,
                                devicePowerFactor: deviceType === 'ac' ? parseFloat(document.getElementById("battery-device-power-factor").value) : null,
                                inverterEfficiencyBattery: deviceType === 'ac' ? parseFloat(document.getElementById("inverter-efficiency-battery").value) : null
                            }
                        };
                        saveCalculatorState("battery-calculator", dataToSave);

                        // ุจูุงุก ูุต ุณุฌู ุงูุญุณุงุจุงุช
                        let historyEntry = `ุฌูุงุฒ: ${deviceVoltage}V/${deviceCurrent}A (${deviceType === 'dc' ? 'DC' : `${devicePhase === 'single' ? 'ุฃุญุงุฏู' : 'ุซูุงุซู'} AC, PF:${devicePowerFactor}`}), ุชุดุบูู ${operationDuration}h, ุจุทุงุฑูุฉ: ${batteryVoltage}V, DoD: ${dod * 100}%, ููุงุกุฉ: ${efficiency * 100}%`;
                        if (deviceType === 'ac') {
                            historyEntry += `, ููุงุกุฉ ูุญูู: ${inverterEfficiencyBattery * 100}%`;
                        }
                        historyEntry += ` โ ุณุนุฉ: ${nominalBatteryAhCapacity.toFixed(2)} Ah ( ${nominalBatteryWhCapacity.toFixed(2)}Wh )`;
                        addToHistory("battery-history-items", historyEntry);
                    },
                },

                "percentage-calculator": {
                    calculate: function () {
                        // ุฌูุจ ุงูููู ูู ุญููู ุงูุฅุฏุฎุงู
                        const originalNumber = parseFloat(document.getElementById("original-number").value);
                        const percentageValue = parseFloat(document.getElementById("percentage-value").value);

                        // ----------------------- ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช -----------------------
                        if (isNaN(originalNumber) || originalNumber < 0) { displayResult("percentage-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุนุฏุฏ ุฃุตูู ุตุญูุญ ูููุฌุจ.", false); return; }
                        if (isNaN(percentageValue) || percentageValue < 0 || percentageValue > 100) { displayResult("percentage-result", "ุงููุณุจุฉ ุงููุฆููุฉ ูุฌุจ ุฃู ุชููู ุจูู 0 ู 100.", false); return; }

                        // ุญุณุงุจ ุงููููุฉ ุงููุฆููุฉ
                        const calculatedValue = (originalNumber * percentageValue) / 100;
                        // ุญุณุงุจ ุงููููุฉ ุจุนุฏ ุฅุถุงูุฉ ุงููุณุจุฉ ุงููุฆููุฉ
                        const addedValue = originalNumber + calculatedValue;
                        // ุญุณุงุจ ุงููููุฉ ุจุนุฏ ุฎุตู ุงููุณุจุฉ ุงููุฆููุฉ
                        const subtractedValue = originalNumber - calculatedValue;

                        // ุจูุงุก ุฑุณุงูุฉ ุงููุชูุฌุฉ ุงูููุตูุฉ
                        const resultMessage = `
                            <h3>ููุฎุต ุงูุญุณุงุจุงุช:</h3>
                            <ul>
                                <li><strong>ุงูุนุฏุฏ ุงูุฃุตูู:</strong> ${originalNumber.toFixed(2)}</li>
                                <li><strong>ุงููุณุจุฉ ุงููุฆููุฉ ุงููุฏุฎูุฉ:</strong> ${percentageValue.toFixed(2)}%</li>
                                <li><strong>ุงููููุฉ ุงููุญุณูุจุฉ (${percentageValue.toFixed(2)}% ูู ${originalNumber.toFixed(2)}):</strong> ${calculatedValue.toFixed(2)}</li>
                            </ul>
                            <hr>
                            <h3>ุงููุชุงุฆุฌ ุงูุชูุตูููุฉ:</h3>
                            <ul>
                                <li>ุฅุฐุง ุฃุถููุง ุงููุณุจุฉ ุงููุฆููุฉ: <strong><span style="color: var(--success-color); font-size: 1.2em;">${addedValue.toFixed(2)}</span></strong> ( ${originalNumber.toFixed(2)} + ${calculatedValue.toFixed(2)} )</li>
                                <li>ุฅุฐุง ุฎุตููุง ุงููุณุจุฉ ุงููุฆููุฉ: <strong><span style="color: var(--success-color); font-size: 1.2em;">${subtractedValue.toFixed(2)}</span></strong> ( ${originalNumber.toFixed(2)} - ${calculatedValue.toFixed(2)} )</li>
                                <li>ุงููููุฉ ุงููุฆููุฉ ููุท: <strong><span style="color: var(--success-color); font-size: 1.2em;">${calculatedValue.toFixed(2)}</span></strong></li>
                            </ul>
                        `;
                        displayResult("percentage-result", resultMessage, true);

                        // ุญูุธ ุจูุงูุงุช ุงููุฏุฎูุงุช ูู Local Storage
                        const dataToSave = {
                            inputs: {
                                originalNumber: originalNumber,
                                percentageValue: percentageValue
                            }
                        };
                        saveCalculatorState("percentage-calculator", dataToSave);
                        // ุฅุถุงูุฉ ุงูุนูููุฉ ุฅูู ุณุฌู ุงูุญุณุงุจุงุช
                        addToHistory("percentage-history-items", `ุงูุนุฏุฏ ุงูุฃุตูู: ${originalNumber}, ุงููุณุจุฉ: ${percentageValue}% โ ุงููููุฉ: ${calculatedValue.toFixed(2)}, ุฅุถุงูุฉ: ${addedValue.toFixed(2)}, ุฎุตู: ${subtractedValue.toFixed(2)}`);
                    },
                },

                "capacitor-calculator": {
                    calculate: function () {
                        // ุฌูุจ ููู ุงููุฏุฎูุงุช
                        const voltage = parseFloat(document.getElementById("cap-voltage").value);
                        const phase = document.getElementById("cap-phase").value;
                        const realPowerKW = parseFloat(document.getElementById("cap-real-power").value);
                        const currentPF = parseFloat(document.getElementById("cap-current-pf").value);
                        const desiredPF = parseFloat(document.getElementById("cap-desired-pf").value);
                        const frequency = parseFloat(document.getElementById("cap-frequency").value);

                        // ----------------------- ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช -----------------------
                        if (isNaN(voltage) || voltage <= 0) { displayResult("capacitor-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฌูุฏ ุชุดุบูู ุตุญูุญ ูููุฌุจ.", false); return; }
                        if (isNaN(realPowerKW) || realPowerKW <= 0) { displayResult("capacitor-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ูุฏุฑุฉ ุญููููุฉ ุตุญูุญุฉ ูููุฌุจุฉ.", false); return; }
                        if (isNaN(currentPF) || currentPF <= 0.1 || currentPF >= 1) { displayResult("capacitor-result", "ูุนุงูู ุงููุฏุฑุฉ ุงูุญุงูู ูุฌุจ ุฃู ูููู ุจูู 0.1 ู 0.99.", false); return; }
                        if (isNaN(desiredPF) || desiredPF <= 0.1 || desiredPF >= 1) { displayResult("capacitor-result", "ูุนุงูู ุงููุฏุฑุฉ ุงููุณุชูุฏู ูุฌุจ ุฃู ูููู ุจูู 0.1 ู 0.99. ููุฌุจ ุฃู ูููู ุฃูุจุฑ ูู ุงูุญุงูู.", false); return; }
                        if (desiredPF <= currentPF) { displayResult("capacitor-result", "ูุนุงูู ุงููุฏุฑุฉ ุงููุณุชูุฏู ูุฌุจ ุฃู ูููู ุฃูุจุฑ ูู ูุนุงูู ุงููุฏุฑุฉ ุงูุญุงูู ูุชุญุณููู.", false); return; }
                        if (isNaN(frequency) || frequency <= 0) { displayResult("capacitor-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุชุฑุฏุฏ ุตุญูุญ ูููุฌุจ.", false); return; }

                        const realPowerWatts = realPowerKW * 1000; // ุชุญููู ุงููุฏุฑุฉ ุงูุญููููุฉ ูู ูููููุงุท ุฅูู ูุงุท

                        // ุญุณุงุจ ุงูุฒูุงูุง (ูุงู) ููุนุงูู ุงููุฏุฑุฉ ุงูุญุงูู ูุงููุณุชูุฏู
                        const angle1 = Math.acos(currentPF); // ุฒุงููุฉ ููุนุงูู ุงููุฏุฑุฉ ุงูุญุงูู
                        const angle2 = Math.acos(desiredPF); // ุฒุงููุฉ ููุนุงูู ุงููุฏุฑุฉ ุงููุณุชูุฏู

                        // ุญุณุงุจ ุงููุฏุฑุฉ ุงูุชูุงุนููุฉ ุงูุญุงููุฉ (Q1) ูุงููุฏุฑุฉ ุงูุชูุงุนููุฉ ุงููุณุชูุฏูุฉ (Q2)
                        // Q = P * tan(phi)
                        const reactivePower1 = realPowerWatts * Math.tan(angle1);
                        const reactivePower2 = realPowerWatts * Math.tan(angle2);

                        // ุญุณุงุจ ุงููุฏุฑุฉ ุงูุชูุงุนููุฉ ุงููุทููุจุฉ ููุชุนููุถ (Qc)
                        const qCompensation = reactivePower1 - reactivePower2;

                        let resultMessage;

                        // ุญุณุงุจ ุณุนุฉ ุงูููุซู ุจูุงุกู ุนูู ููุน ุงูุทูุฑ (ุฃุญุงุฏู ุฃู ุซูุงุซู)
                        if (phase === "single") {
                            if (voltage === 0 || frequency === 0) {
                                displayResult("capacitor-result", "ูุง ูููู ุญุณุงุจ ุงูุณุนุฉ. ุชุฃูุฏ ูู ุฃู ุงูุฌูุฏ ูุงูุชุฑุฏุฏ ุตุญูุญูู ูููุฌุจูู.", false); return;
                            }
                            // ูุณูู ุฃุญุงุฏู ุงูุทูุฑ: C = Qc / (2 * ฯ * f * V^2)
                            const capacitorValueFarads = qCompensation / (2 * Math.PI * frequency * Math.pow(voltage, 2));
                            const capacitorValueMicroFarads = capacitorValueFarads * 1e6; // ุชุญููู ูู ูุงุฑุงุฏ ุฅูู ูููุฑู ูุงุฑุงุฏ

                            resultMessage = `
                                <h3>ููุฎุต ุงูุญุณุงุจุงุช:</h3>
                                <ul>
                                    <li><strong>ุงููุฏุฑุฉ ุงูุญููููุฉ (P):</strong> ${realPowerKW.toFixed(2)} kW</li>
                                    <li><strong>ูุนุงูู ุงููุฏุฑุฉ ุงูุญุงูู (cos ฯ<sub>1</sub>):</strong> ${currentPF.toFixed(2)} (ุฒุงููุฉ ฯ<sub>1</sub>: ${(angle1 * 180 / Math.PI).toFixed(2)}&deg;)</li>
                                    <li><strong>ูุนุงูู ุงููุฏุฑุฉ ุงููุณุชูุฏู (cos ฯ<sub>2</sub>):</strong> ${desiredPF.toFixed(2)} (ุฒุงููุฉ ฯ<sub>2</sub>: ${(angle2 * 180 / Math.PI).toFixed(2)}&deg;)</li>
                                    <li><strong>ุงูุชุฑุฏุฏ (f):</strong> ${frequency.toFixed(0)} Hz</li>
                                    <li><strong>ุงูุฌูุฏ (V):</strong> ${voltage.toFixed(0)} V</li>
                                </ul>
                                <h4>ุงููุฏุฑุฉ ุงูุชูุงุนููุฉ ุงููุทููุจุฉ ููุชุนููุถ (Qc):</h4>
                                <p>
                                    ุงููุฏุฑุฉ ุงูุชูุงุนููุฉ ุงูุญุงููุฉ (Q<sub>1</sub>) = ${reactivePower1.toFixed(2)} Var<br>
                                    ุงููุฏุฑุฉ ุงูุชูุงุนููุฉ ุงููุณุชูุฏูุฉ (Q<sub>2</sub>) = ${reactivePower2.toFixed(2)} Var<br>
                                    ูุฑู ุงููุฏุฑุฉ ุงูุชูุงุนููุฉ (Qc) = Q<sub>1</sub> - Q<sub>2</sub> = <strong>${qCompensation.toFixed(2)} Var</strong>
                                </p>
                                <h3>ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ:</h3>
                                <p>ุจูุงุกู ุนูู ูุธุงู <strong>ุฃุญุงุฏู ุงูุทูุฑ</strong>:</p>
                                <p><strong>ุงูุณุนุฉ ุงููุทููุจุฉ ููููุซู: <span style="color: var(--success-color); font-size: 1.2em;">${capacitorValueMicroFarads.toFixed(2)} ยตF</span></strong></p>
                                <p><small>ููุงุญุธุฉ: ุงููููุฉ ุงููุญุณูุจุฉ ูู ูููุซู ูุงุญุฏ.</small></p>
                            `;
                        } else {
                            // ููุธุงู ุซูุงุซู ุงูุทูุฑ
                            if (voltage === 0 || frequency === 0) {
                                displayResult("capacitor-result", "ูุง ูููู ุญุณุงุจ ุงูุณุนุฉ. ุชุฃูุฏ ูู ุฃู ุงูุฌูุฏ ูุงูุชุฑุฏุฏ ุตุญูุญูู ูููุฌุจูู.", false); return;
                            }
                            // ุณุนุฉ ุงูููุซู ููู ุทูุฑ ูุชูุตูู ุฏูุชุง (ฮ): C_delta = Qc / (3 * 2 * ฯ * f * V_line^2)
                            const C_delta_per_phase_farads = qCompensation / (3 * 2 * Math.PI * frequency * Math.pow(voltage, 2));
                            const C_delta_per_phase_microFarads = C_delta_per_phase_farads * 1e6;

                            // ุฌูุฏ ุงูุทูุฑ ูู ุชูุตูู ุณุชุงุฑ (Y)
                            const V_phase = voltage / Math.sqrt(3);
                            if (V_phase === 0) {
                                displayResult("capacitor-result", "ุฎุทุฃ ูู ุญุณุงุจ ุฌูุฏ ุงูุทูุฑ. ุชุฃูุฏ ูู ุตุญุฉ ุงูุฌูุฏ ุงููุฏุฎู.", false); return;
                            }
                            // ุณุนุฉ ุงูููุซู ููู ุทูุฑ ูุชูุตูู ุณุชุงุฑ (Y): C_star = Qc / (3 * 2 * ฯ * f * V_phase^2)
                            const C_star_per_phase_farads = qCompensation / (3 * 2 * Math.PI * frequency * Math.pow(V_phase, 2));
                            const C_star_per_phase_microFarads = C_star_per_phase_farads * 1e6;

                            resultMessage = `
                                <h3>ููุฎุต ุงูุญุณุงุจุงุช:</h3>
                                <ul>
                                    <li><strong>ุงููุฏุฑุฉ ุงูุญููููุฉ (P):</strong> ${realPowerKW.toFixed(2)} kW</li>
                                    <li><strong>ูุนุงูู ุงููุฏุฑุฉ ุงูุญุงูู (cos ฯ<sub>1</sub>):</strong> ${currentPF.toFixed(2)} (ุฒุงููุฉ ฯ<sub>1</sub>: ${(angle1 * 180 / Math.PI).toFixed(2)}&deg;)</li>
                                    <li><strong>ูุนุงูู ุงููุฏุฑุฉ ุงููุณุชูุฏู (cos ฯ<sub>2</sub>):</strong> ${desiredPF.toFixed(2)} (ุฒุงููุฉ ฯ<sub>2</sub>: ${(angle2 * 180 / Math.PI).toFixed(2)}&deg;)</li>
                                    <li><strong>ุงูุชุฑุฏุฏ (f):</strong> ${frequency.toFixed(0)} Hz</li>
                                    <li><strong>ุฌูุฏ ุงูุฎุท (V<sub>L</sub>):</strong> ${voltage.toFixed(0)} V</li>
                                </ul>
                                <h4>ุงููุฏุฑุฉ ุงูุชูุงุนููุฉ ุงููุทููุจุฉ ููุชุนููุถ (Qc):</h4>
                                <p>
                                    ุงููุฏุฑุฉ ุงูุชูุงุนููุฉ ุงูุญุงููุฉ (Q<sub>1</sub>) = ${reactivePower1.toFixed(2)} Var<br>
                                    ุงููุฏุฑุฉ ุงูุชูุงุนููุฉ ุงููุณุชูุฏูุฉ (Q<sub>2</sub>) = ${reactivePower2.toFixed(2)} Var<br>
                                    ูุฑู ุงููุฏุฑุฉ ุงูุชูุงุนููุฉ (Qc) = Q<sub>1</sub> - Q<sub>2</sub> = <strong>${qCompensation.toFixed(2)} Var</strong>
                                </p>
                                <h3>ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ:</h3>
                                <p>ุจูุงุกู ุนูู ูุธุงู <strong>ุซูุงุซู ุงูุทูุฑ</strong>:</p>
                                <p>ูุชุญููู ุชุญุณูู ูุนุงูู ุงููุฏุฑุฉุ ุณุชุญุชุงุฌ ุฅูู ุฅุฌูุงูู <strong>${qCompensation.toFixed(2)} Var</strong> ูู ุงููุฏุฑุฉ ุงูุชูุงุนููุฉ.</p>
                                <h4>ุฎูุงุฑุงุช ุงูุชูุตูู (ููู ุทูุฑ):</h4>
                                <ul>
                                    <li><strong>ููุชูุตูู ุฏูุชุง (ฮ):</strong> ูู ููุซู ูุฌุจ ุฃู ุชููู ุณุนุชู <strong>${C_delta_per_phase_microFarads.toFixed(2)} ยตF</strong>.<br>
                                        <small>(ุซูุงุซ ููุซูุงุช ูุชุตูุฉ ุจูู ุงูุฎุทูุทุ ุฌูุฏ ูู ููุซู = ุฌูุฏ ุงูุฎุท ${voltage.toFixed(0)}V)</small></li>
                                    <li><strong>ููุชูุตูู ุณุชุงุฑ (Y):</strong> ูู ููุซู ูุฌุจ ุฃู ุชููู ุณุนุชู <strong>${C_star_per_phase_microFarads.toFixed(2)} ยตF</strong>.<br>
                                        <small>(ุซูุงุซ ููุซูุงุช ูุชุตูุฉ ุจูู ุงูุฎุทูุท ูููุทุฉ ุงููุฌูุฉุ ุฌูุฏ ูู ููุซู = ุฌูุฏ ุงูุทูุฑ ${V_phase.toFixed(0)}V)</small></li>
                                </ul>
                                <p><small>ููุงุญุธุฉ: ุชูุตูู ุฏูุชุง ูู ุงูุฃูุซุฑ ุดููุนุงู ูุชุญุณูู ูุนุงูู ุงููุฏุฑุฉ ูู ุงูุฃุญูุงู ุงูุตูุงุนูุฉ.</small></p>
                            `;
                        }

                        displayResult("capacitor-result", resultMessage, true);

                        // ุญูุธ ุจูุงูุงุช ุงููุฏุฎูุงุช ูู Local Storage
                        const dataToSave = {
                            inputs: {
                                voltage: voltage,
                                phase: phase,
                                realPowerKW: realPowerKW,
                                currentPF: currentPF,
                                desiredPF: desiredPF,
                                frequency: frequency
                            }
                        };
                        saveCalculatorState("capacitor-calculator", dataToSave);
                        // ุฅุถุงูุฉ ุงูุนูููุฉ ุฅูู ุณุฌู ุงูุญุณุงุจุงุช
                        addToHistory("capacitor-history-items", `kW: ${realPowerKW}, PF1: ${currentPF}, PF2: ${desiredPF}, ุชุฑุฏุฏ: ${frequency}Hz, ุทูุฑ: ${phase === "single" ? "ุฃุญุงุฏู" : "ุซูุงุซู"} โ Qc: ${qCompensation.toFixed(2)} Var`);
                    },
                },

                "flow-converter": {
                    calculate: function () {
                        // ุฌูุจ ููู ุงููุฏุฎูุงุช
                        const inputValue = parseFloat(document.getElementById("flow-input-value").value);
                        const conversionType = document.getElementById("flow-conversion-type").value;

                        // ----------------------- ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช -----------------------
                        if (isNaN(inputValue) || inputValue < 0) { displayResult("flow-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุฉ ุตุญูุญุฉ ูููุฌุจุฉ ููุชุญููู.", false); return; }

                        let result = 0;
                        let unitFrom = "";
                        let unitTo = "";
                        let explanation = ""; // ุดุฑุญ ูููููุฉ ุงูุญุณุงุจ

                        // ุฅุฌุฑุงุก ุงูุชุญููู ุจูุงุกู ุนูู ููุน ุงูุชุญููู ุงููุญุฏุฏ
                        if (conversionType === "m3h-to-lps") {
                            // ูู ูุชุฑ ููุนุจ/ุณุงุนุฉ ุฅูู ูุชุฑ/ุซุงููุฉ: (ูููุฉ * 1000) / 3600
                            result = (inputValue * 1000) / 3600;
                            unitFrom = "ูยณ/ุณุงุนุฉ";
                            unitTo = "ูุชุฑ/ุซุงููุฉ";
                            explanation = " (ุจุถุฑุจ ุงููููุฉ ูู 1000 ููุชุญููู ุฅูู ูุชุฑุ ุซู ุงููุณูุฉ ุนูู 3600 ููุชุญููู ุฅูู ุซุงููุฉ)";
                        } else {
                            // ูู ูุชุฑ/ุซุงููุฉ ุฅูู ูุชุฑ ููุนุจ/ุณุงุนุฉ: (ูููุฉ * 3600) / 1000
                            result = (inputValue * 3600) / 1000;
                            unitFrom = "ูุชุฑ/ุซุงููุฉ";
                            unitTo = "ูยณ/ุณุงุนุฉ";
                            explanation = " (ุจุถุฑุจ ุงููููุฉ ูู 3600 ููุชุญููู ุฅูู ุณุงุนุฉุ ุซู ุงููุณูุฉ ุนูู 1000 ููุชุญููู ุฅูู ูุชุฑ ููุนุจ)";
                        }

                        // ุจูุงุก ุฑุณุงูุฉ ุงููุชูุฌุฉ ุงูููุตูุฉ
                        const resultMessage = `
                            <h3>ููุฎุต ุงูุญุณุงุจุงุช:</h3>
                            <ul>
                                <li><strong>ุงููููุฉ ุงููุฏุฎูุฉ:</strong> ${inputValue.toFixed(2)} ${unitFrom}</li>
                                <li><strong>ููุน ุงูุชุญููู:</strong> ูู ${unitFrom} ุฅูู ${unitTo}</li>
                            </ul>
                            <h3>ุงููุชูุฌุฉ: <strong><span style="color: var(--success-color); font-size: 1.2em;">${result.toFixed(2)} ${unitTo}</span></strong></h3>
                            <p><small>ููู ุชู ุงูุญุณุงุจ: ${explanation}</small></p>
                        `;
                        displayResult("flow-result", resultMessage, true);

                        // ุญูุธ ุจูุงูุงุช ุงููุฏุฎูุงุช ูู Local Storage
                        const dataToSave = {
                            inputs: {
                                inputValue: inputValue,
                                conversionType: conversionType
                            }
                        };
                        saveCalculatorState("flow-converter", dataToSave);
                        // ุฅุถุงูุฉ ุงูุนูููุฉ ุฅูู ุณุฌู ุงูุญุณุงุจุงุช
                        addToHistory("flow-history-items", `ุชุญููู ${inputValue} ${unitFrom} โ ${result.toFixed(2)} ${unitTo}`);
                    },
                },

                "tank-calculator": {
                    calculate: function () {
                        // ุฌูุจ ููู ุงููุฏุฎูุงุช
                        const tankShape = document.getElementById("tank-shape").value;
                        const lengthOrDiameter = parseFloat(document.getElementById("tank-length").value);
                        const width = parseFloat(document.getElementById("tank-width").value); // ูุณุชุฎุฏู ููููุนุจ ููุท
                        const height = parseFloat(document.getElementById("tank-height").value);
                        const flowRateM3H = parseFloat(document.getElementById("tank-flow-rate").value);

                        // ----------------------- ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช -----------------------
                        if (isNaN(lengthOrDiameter) || lengthOrDiameter <= 0) { displayResult("tank-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุฉ ุตุญูุญุฉ ูููุฌุจุฉ ููุทูู ุฃู ุงููุทุฑ.", false); return; }
                        if (isNaN(height) || height <= 0) { displayResult("tank-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุฉ ุตุญูุญุฉ ูููุฌุจุฉ ููุงุฑุชูุงุน.", false); return; }
                        if (isNaN(flowRateM3H) || flowRateM3H <= 0) { displayResult("tank-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ูุนุฏู ุชุฏูู ุตุญูุญ ูููุฌุจ.", false); return; }

                        let volume = 0; // ุญุฌู ุงูุฎุฒุงู ุจุงููุชุฑ ุงูููุนุจ

                        // ุญุณุงุจ ุญุฌู ุงูุฎุฒุงู ุจูุงุกู ุนูู ุดููู
                        if (tankShape === "cube") {
                            // ููููุนุจ: ุงูุญุฌู = ุงูุทูู ร ุงูุนุฑุถ ร ุงูุงุฑุชูุงุน
                            if (isNaN(width) || width <= 0) { displayResult("tank-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุฉ ุตุญูุญุฉ ูููุฌุจุฉ ููุนุฑุถ ููุฎุฒุงู ุงูููุนุจ.", false); return; }
                            volume = lengthOrDiameter * width * height;
                        } else {
                            // ููุฃุณุทูุงูู: ุงูุญุฌู = ฯ ร (ุงููุทุฑ/2)^2 ร ุงูุงุฑุชูุงุน
                            volume = Math.PI * Math.pow(lengthOrDiameter / 2, 2) * height;
                        }

                        // ุงูุชุญูู ูู ุฃู ุงูุญุฌู ุงููุญุณูุจ ููุทูู
                        if (volume === 0) {
                            displayResult("tank-result", "ุฎุทุฃ ูู ุญุณุงุจ ุณุนุฉ ุงูุฎุฒุงู. ุชุฃูุฏ ูู ุฃู ุงูุฃุจุนุงุฏ ุตุญูุญุฉ ูููุฌุจุฉ.", false); return;
                        }
                        // ุญุณุงุจ ุงูููุช ุงููุงุฒู ูุชูุฑูุบ ุงูุฎุฒุงู (ุจุงูุณุงุนุงุช ุซู ุงูุฏูุงุฆู)
                        const timeToEmptyHours = volume / flowRateM3H;
                        const timeToEmptyMinutes = timeToEmptyHours * 60;

                        // ุจูุงุก ุฑุณุงูุฉ ุงููุชูุฌุฉ ุงูููุตูุฉ
                        const resultMessage = `
                            <h3>ููุฎุต ุงูุญุณุงุจุงุช:</h3>
                            <ul>
                                <li><strong>ุดูู ุงูุฎุฒุงู:</strong> ${tankShape === 'cube' ? 'ููุนุจ' : 'ุฃุณุทูุงูู'}</li>
                                <li><strong>ุงูุฃุจุนุงุฏ:</strong> ${lengthOrDiameter.toFixed(2)} ู (ุงูุทูู/ุงููุทุฑ) ${tankShape === 'cube' ? ' x ' + width.toFixed(2) + ' ู (ุงูุนุฑุถ)' : ''} x ${height.toFixed(2)} ู (ุงูุงุฑุชูุงุน)</li>
                                <li><strong>ูุนุฏู ุงูุชุฏูู:</strong> ${flowRateM3H.toFixed(2)} ูุชุฑ ููุนุจ/ุณุงุนุฉ</li>
                            </ul>
                            <h3>ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ:</h3>
                            <ul>
                                <li><strong>ุงูุณุนุฉ ุงููููุฉ ููุฎุฒุงู: <span style="color: var(--success-color); font-size: 1.2em;">${volume.toFixed(2)} ูุชุฑ ููุนุจ (ูยณ)</span></strong></li>
                                <li><strong>ุงูููุช ุงููุงุฒู ูุชูุฑูุบ ุงูุฎุฒุงู: <span style="color: var(--success-color); font-size: 1.2em;">${timeToEmptyMinutes.toFixed(2)} ุฏูููุฉ</span></strong></li>
                            </ul>
                            <p><small>ููุงุญุธุฉ: 1 ูุชุฑ ููุนุจ ูุนุงุฏู 1000 ูุชุฑ. ูุฐุง ุงูุญุณุงุจ ููุชุฑุถ ุชุฏูููุง ุซุงุจุชูุง.</small></p>
                        `;

                        displayResult("tank-result", resultMessage, true);
                        // ุญูุธ ุจูุงูุงุช ุงููุฏุฎูุงุช ูู Local Storage
                        const dataToSave = {
                            inputs: {
                                tankShape: tankShape,
                                lengthOrDiameter: lengthOrDiameter,
                                width: width,
                                height: height,
                                flowRateM3H: flowRateM3H
                            }
                        };
                        saveCalculatorState("tank-calculator", dataToSave);
                        // ุฅุถุงูุฉ ุงูุนูููุฉ ุฅูู ุณุฌู ุงูุญุณุงุจุงุช
                        addToHistory("tank-history-items", `ุดูู: ${tankShape}, ุฃุจุนุงุฏ: ${lengthOrDiameter}x${tankShape === 'cube' ? width + 'x' : ''}${height} ู, ุชุฏูู: ${flowRateM3H} ูยณ/ุณุงุนุฉ โ ุณุนุฉ: ${volume.toFixed(2)} ูยณ, ููุช: ${timeToEmptyMinutes.toFixed(2)} ุฏูููุฉ`);
                    },
                },

                "resistance-voltage-drop": {
                    calculate: function () {
                        // ุฌูุจ ููู ุงููุฏุฎูุงุช
                        const voltage = parseFloat(document.getElementById("rvd-voltage").value);
                        const current = parseFloat(document.getElementById("rvd-current").value);
                        const phase = document.getElementById("rvd-phase").value;
                        const powerFactor = parseFloat(document.getElementById("rvd-power-factor").value);
                        const material = document.getElementById("rvd-material").value;
                        const length = parseFloat(document.getElementById("rvd-length").value);
                        const allowedVoltageDropPercentage = parseFloat(document.getElementById("rvd-allowed-voltage-drop-percentage").value);

                        let resistivity; // ุงูููุงููุฉ ุงูููุนูุฉ ูููุงุฏุฉ
                        let materialName = "";
                        // ุชุญุฏูุฏ ุงูููุงููุฉ ุงูููุนูุฉ ูุงุณู ุงููุงุฏุฉ ุจูุงุกู ุนูู ุงูุงุฎุชูุงุฑ
                        if (material === "copper") {
                            resistivity = 0.0172; // ุฃููยทููยฒ/ูุชุฑ ูููุญุงุณ
                            materialName = "ุงููุญุงุณ (0.0172 ฮฉยทmmยฒ/m)";
                        } else {
                            resistivity = 0.0282; // ุฃููยทููยฒ/ูุชุฑ ููุฃูููููู
                            materialName = "ุงูุฃูููููู (0.0282 ฮฉยทmmยฒ/m)";
                        }

                        // ----------------------- ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช -----------------------
                        if (isNaN(voltage) || voltage <= 0) { displayResult("rvd-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฌูุฏ ููุฑุจุงุฆู ุตุญูุญ ูููุฌุจ.", false); return; }
                        if (isNaN(current) || current <= 0) { displayResult("rvd-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุชูุงุฑ ููุฑุจุงุฆู ุตุญูุญ ูููุฌุจ.", false); return; }
                        if (isNaN(length) || length <= 0) { displayResult("rvd-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุทูู ููุตู ุตุญูุญ ูููุฌุจ.", false); return; }
                        if (isNaN(allowedVoltageDropPercentage) || allowedVoltageDropPercentage <= 0 || allowedVoltageDropPercentage > 100) { displayResult("rvd-result", "ุงูุญุฏ ุงูุฃูุตู ูููุฏ ุงูุฌูุฏ ุงููุณููุญ ุจู ูุฌุจ ุฃู ูููู ุจูู 0.1% ู 100%.", false); return; }
                        if (isNaN(powerFactor) || powerFactor <= 0.1 || powerFactor > 1) { displayResult("rvd-result", "ูุนุงูู ุงููุฏุฑุฉ ูุฌุจ ุฃู ูููู ุจูู 0.1 ู 1.", false); return; }


                        // ุญุณุงุจ ุฃูุตู ุฌูุฏ ูุณููุญ ุจููุฏู (ุจุงููููุช)
                        const maxAllowedVoltageDrop = (allowedVoltageDropPercentage / 100) * voltage;

                        // ุงูุชุญูู ูู ููู ุงูููุงู ูุชุฌูุจ ุงููุณูุฉ ุนูู ุตูุฑ ุฃู ููู ุบูุฑ ููุทููุฉ
                        if (current === 0 || maxAllowedVoltageDrop === 0) {
                            displayResult("rvd-result", "ูุง ูููู ุญุณุงุจ ูุณุงุญุฉ ุงูููุทุน. ุชุฃูุฏ ูู ุฃู ุงูุชูุงุฑ ูุงูุฌูุฏ ุงููุณููุญ ุจู ูููุฏ ุงูุฌูุฏ ููุฌุจุงู ูุบูุฑ ุตูุฑููู.", false);
                            return;
                        }

                        let requiredArea; // ูุณุงุญุฉ ุงูููุทุน ุงูุนุฑุถู ุงููุทููุจุฉ (ููยฒ)
                        // ุญุณุงุจ ูุณุงุญุฉ ุงูููุทุน ุงูุนุฑุถู ุจูุงุกู ุนูู ููุน ุงูุทูุฑ
                        if (phase === "single") {
                            // ููุธุงู ุฃุญุงุฏู ุงูุทูุฑ: A = (2 * ฯ * L * I * cosฯ) / ฮV
                            // ุญูุซ ฮV ูู ูุฑู ุงูุฌูุฏ ุงููุณููุญ ุจู
                            requiredArea = (2 * resistivity * length * current * powerFactor) / maxAllowedVoltageDrop;
                        } else {
                            // ููุธุงู ุซูุงุซู ุงูุทูุฑ: A = (โ3 * ฯ * L * I * cosฯ) / ฮV
                            requiredArea = (Math.sqrt(3) * resistivity * length * current * powerFactor) / maxAllowedVoltageDrop;
                        }

                        // ุงูุชุญูู ูู ุตุญุฉ ุงููููุฉ ุงููุญุณูุจุฉ ููุณุงุญุฉ ุงูููุทุน
                        if (isNaN(requiredArea) || requiredArea <= 0 || !isFinite(requiredArea)) {
                            displayResult("rvd-result", "ุญุฏุซ ุฎุทุฃ ูู ุญุณุงุจ ูุณุงุญุฉ ุงูููุทุน. ุชุฃูุฏ ูู ุตุญุฉ ุงููุฏุฎูุงุช ูุฃู ุงููุชุงุฆุฌ ููุทููุฉ (ุชุฌูุจ ุงูููู ุงูุตุบูุฑุฉ ุฌุฏุงู ุฃู ุงููุจูุฑุฉ ุฌุฏุงู).", false);
                            return;
                        }

                        // ุจูุงุก ุฑุณุงูุฉ ุงููุชูุฌุฉ ุงูููุตูุฉ
                        let resultMessage = `
                            <h3>ููุฎุต ุงููุฏุฎูุงุช:</h3>
                            <ul>
                                <li><strong>ุงูุฌูุฏ ุงูููุฑุจุงุฆู:</strong> ${voltage.toFixed(0)} V</li>
                                <li><strong>ุงูุชูุงุฑ ุงูููุฑุจุงุฆู:</strong> ${current.toFixed(2)} A</li>
                                <li><strong>ููุน ุงูุทูุฑ:</strong> ${phase === 'single' ? 'ุฃุญุงุฏู' : 'ุซูุงุซู'}</li>
                                <li><strong>ูุนุงูู ุงููุฏุฑุฉ:</strong> ${powerFactor.toFixed(2)}</li>
                                <li><strong>ูุงุฏุฉ ุงูููุตู:</strong> ${materialName}</li>
                                <li><strong>ุทูู ุงูููุตู (ุงุชุฌุงู ูุงุญุฏ):</strong> ${length.toFixed(1)} ูุชุฑ</li>
                                <li><strong>ุงูุญุฏ ุงูุฃูุตู ูููุฏ ุงูุฌูุฏ ุงููุณููุญ ุจู:</strong> ${allowedVoltageDropPercentage.toFixed(1)}%</li>
                            </ul>
                            <h3>ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ:</h3>
                            <ul>
                                <li>ุงูุฌูุฏ ุงูุฃูุตู ุงููุณููุญ ุจููุฏู: <strong>${maxAllowedVoltageDrop.toFixed(2)} V</strong></li>
                                <li><strong>ูุณุงุญุฉ ุงูููุทุน ุงูุนุฑุถู ุงููุทููุจุฉ ููููุตู: <span style="color: var(--success-color); font-size: 1.2em;">${requiredArea.toFixed(2)} mmยฒ</span></strong></li>
                            </ul>
                            <p><small>ููุงุญุธุฉ: ูุฐุง ุงูุญุณุงุจ ูููุฑ ุงูุญุฏ ุงูุฃุฏูู ููุณุงุญุฉ ุงูููุทุน. ููุตู ุจุงุฎุชูุงุฑ ููุทุน ุนุฑุถู ููุงุณู ุฃูุจุฑ ููููุงู ูุถูุงู ุงูุฃุฏุงุก ุงูุฃูุซู.</small></p>
                        `;

                        displayResult("rvd-result", resultMessage, true);

                        // ุญูุธ ุจูุงูุงุช ุงููุฏุฎูุงุช ูู Local Storage
                        const dataToSave = {
                            inputs: {
                                voltage: voltage,
                                current: current,
                                material: material,
                                length: length,
                                allowedVoltageDropPercentage: allowedVoltageDropPercentage,
                                phase: phase,
                                powerFactor: powerFactor
                            }
                        };
                        saveCalculatorState("resistance-voltage-drop", dataToSave);
                        // ุฅุถุงูุฉ ุงูุนูููุฉ ุฅูู ุณุฌู ุงูุญุณุงุจุงุช
                        addToHistory("rvd-history-items", `ุฌูุฏ: ${voltage}V, ุชูุงุฑ: ${current}A, ุทูู: ${length}ู, ูุงุฏุฉ: ${material}, ุทูุฑ: ${phase === "single" ? "ุฃุญุงุฏู" : "ุซูุงุซู"}, PF: ${powerFactor}, ููุฏ ูุณููุญ ุจู: ${allowedVoltageDropPercentage}% โ ูุณุงุญุฉ ุงูููุทุน: ${requiredArea.toFixed(2)} mmยฒ`);
                    },
                },

                "pulley-calculator": {
                    calculate: function () {
                        // ุฌูุจ ููู ุงููุฏุฎูุงุช (ูุทุฑ ูุณุฑุนุฉ ุงูุจูุฑุฉ ุงูุฃููู ูุงูุซุงููุฉ)
                        const d1 = parseFloat(document.getElementById("pulley-d1").value);
                        const rpm1 = parseFloat(document.getElementById("pulley-rpm1").value);
                        const d2 = parseFloat(document.getElementById("pulley-d2").value);
                        const rpm2 = parseFloat(document.getElementById("pulley-rpm2").value);

                        // ุนุฏ ุงูุญููู ุงูุชู ุชุญุชูู ุนูู ููู ุตุงูุญุฉ ูููุฌุจุฉ (ูุนุฑููุฉ)
                        let knownInputsCount = 0;
                        if (!isNaN(d1) && d1 > 0) knownInputsCount++;
                        if (!isNaN(rpm1) && rpm1 > 0) knownInputsCount++;
                        if (!isNaN(d2) && d2 > 0) knownInputsCount++;
                        if (!isNaN(rpm2) && rpm2 > 0) knownInputsCount++;

                        // ----------------------- ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช -----------------------
                        // ูุฌุจ ุฃู ูููู ููุงู ุซูุงุซ ููู ูุนุฑููุฉ ุจุงูุถุจุท ูุชูููู ุญุณุงุจ ุงููููุฉ ุงูุฑุงุจุนุฉ ุงููุฌูููุฉ.
                        if (knownInputsCount !== 3) {
                            displayResult("pulley-result", "ุงูุฑุฌุงุก ุฅุฏุฎุงู ุซูุงุซ ููู ูุนูููุฉ ููุท (ููุฌุจุฉ ูุบูุฑ ุตูุฑูุฉ) ูุชุฑู ุญูู ูุงุญุฏ ูุงุฑุบูุง ูููุฌููู.", false);
                            return;
                        }

                        let unknownValue; // ุงููููุฉ ุงููุฌูููุฉ ุงููุญุณูุจุฉ
                        let unknownType = ""; // ููุน ุงููููุฉ ุงููุฌูููุฉ (ูุซู: ูุทุฑ ุงูุจูุฑุฉ ุงูุฃููู)
                        let resultMessage = ""; // ุฑุณุงูุฉ ุงููุชูุฌุฉ ุงูููุตูุฉ

                        // ุงุณุชุฎุฏุงู ูุนุงุฏูุฉ ุงูุจูุฑุงุช: D1 ร RPM1 = D2 ร RPM2
                        // ุชุญุฏูุฏ ุฃู ูู ุงูููู ูุฌูููุฉ ูุญุณุงุจูุง ุจูุงุกู ุนูู ุงูููู ุงููุนุฑููุฉ ุงูุฃุฎุฑู.
                        if (isNaN(d1) || d1 <= 0) { // ุฅุฐุง ูุงู D1 ูู ุงููุฌููู
                            if (rpm1 > 0 && d2 > 0 && rpm2 > 0) {
                                unknownValue = (d2 * rpm2) / rpm1;
                                unknownType = "ูุทุฑ ุงูุจูุฑุฉ ุงูุฃููู (D1)";
                                resultMessage = `
                                    <p><strong>ุงูููู ุงููุฏุฎูุฉ:</strong> D2=${d2} ูู, RPM1=${rpm1} RPM, RPM2=${rpm2} RPM</p>
                                    <h3>ุงููููุฉ ุงููุฌูููุฉ: <strong>${unknownType} = <span style="color: var(--success-color); font-size: 1.2em;">${unknownValue.toFixed(2)} ูู</span></strong></h3>
                                    <p><small>ูุนุงุฏูุฉ ุงูุจูุฑุงุช: D1 ร RPM1 = D2 ร RPM2</small></p>
                                `;
                            }
                        } else if (isNaN(rpm1) || rpm1 <= 0) { // ุฅุฐุง ูุงู RPM1 ูู ุงููุฌููู
                            if (d1 > 0 && d2 > 0 && rpm2 > 0) {
                                unknownValue = (d2 * rpm2) / d1;
                                unknownType = "ุณุฑุนุฉ ุงูุจูุฑุฉ ุงูุฃููู (RPM1)";
                                resultMessage = `
                                    <p><strong>ุงูููู ุงููุฏุฎูุฉ:</strong> D1=${d1} ูู, D2=${d2} ูู, RPM2=${rpm2} RPM</p>
                                    <h3>ุงููููุฉ ุงููุฌูููุฉ: <strong>${unknownType} = <span style="color: var(--success-color); font-size: 1.2em;">${unknownValue.toFixed(2)} RPM</span></strong></h3>
                                    <p><small>ูุนุงุฏูุฉ ุงูุจูุฑุงุช: D1 ร RPM1 = D2 ร RPM2</small></p>
                                `;
                            }
                        } else if (isNaN(d2) || d2 <= 0) { // ุฅุฐุง ูุงู D2 ูู ุงููุฌููู
                            if (d1 > 0 && rpm1 > 0 && rpm2 > 0) {
                                unknownValue = (d1 * rpm1) / rpm2;
                                unknownType = "ูุทุฑ ุงูุจูุฑุฉ ุงูุซุงููุฉ (D2)";
                                resultMessage = `
                                    <p><strong>ุงูููู ุงููุฏุฎูุฉ:</strong> D1=${d1} ูู, RPM1=${rpm1} RPM, RPM2=${rpm2} RPM</p>
                                    <h3>ุงููููุฉ ุงููุฌูููุฉ: <strong>${unknownType} = <span style="color: var(--success-color); font-size: 1.2em;">${unknownValue.toFixed(2)} ูู</span></strong></h3>
                                    <p><small>ูุนุงุฏูุฉ ุงูุจูุฑุงุช: D1 ร RPM1 = D2 ร RPM2</small></p>
                                `;
                            }
                        } else if (isNaN(rpm2) || rpm2 <= 0) { // ุฅุฐุง ูุงู RPM2 ูู ุงููุฌููู
                            if (d1 > 0 && rpm1 > 0 && d2 > 0) {
                                unknownValue = (d1 * rpm1) / d2;
                                unknownType = "ุณุฑุนุฉ ุงูุจูุฑุฉ ุงูุซุงููุฉ (RPM2)";
                                resultMessage = `
                                    <p><strong>ุงูููู ุงููุฏุฎูุฉ:</strong> D1=${d1} ูู, RPM1=${rpm1} RPM, D2=${d2} ูู</p>
                                    <h3>ุงููููุฉ ุงููุฌูููุฉ: <strong>${unknownType} = <span style="color: var(--success-color); font-size: 1.2em;">${unknownValue.toFixed(2)} RPM</span></strong></h3>
                                    <p><small>ูุนุงุฏูุฉ ุงูุจูุฑุงุช: D1 ร RPM1 = D2 ร RPM2</small></p>
                                `;
                            }
                        }

                        // ุงูุชุญูู ุงูููุงุฆู ูู ุฃู ุงููููุฉ ุงููุฌูููุฉ ุงููุญุณูุจุฉ ุตุงูุญุฉ
                        if (isNaN(unknownValue) || unknownValue <= 0 || !isFinite(unknownValue)) {
                            displayResult("pulley-result", "ุญุฏุซ ุฎุทุฃ ูู ุงูุญุณุงุจ. ุชุฃูุฏ ูู ุฅุฏุฎุงู ุซูุงุซ ููู ุตุญูุญุฉ ูููุฌุจุฉ ูุชุฌูุจ ูุณูุฉ ุนูู ุตูุฑ.", false);
                            return;
                        }

                        displayResult("pulley-result", resultMessage, true);

                        // ุญูุธ ุจูุงูุงุช ุงููุฏุฎูุงุช ูู Local Storage (ุญุชู ุงูุญููู ุงููุงุฑุบุฉ ูุชู ุญูุธูุง ูู null)
                        const dataToSave = {
                            inputs: {
                                d1: document.getElementById("pulley-d1").value === '' ? null : d1,
                                rpm1: document.getElementById("pulley-rpm1").value === '' ? null : rpm1,
                                d2: document.getElementById("pulley-d2").value === '' ? null : d2,
                                rpm2: document.getElementById("pulley-rpm2").value === '' ? null : rpm2
                            }
                        };
                        saveCalculatorState("pulley-calculator", dataToSave);
                        // ุฅุถุงูุฉ ุงูุนูููุฉ ุฅูู ุณุฌู ุงูุญุณุงุจุงุช
                        addToHistory("pulley-history-items", `D1:${isNaN(d1) ? 'ุ' : d1}, RPM1:${isNaN(rpm1) ? 'ุ' : rpm1}, D2:${isNaN(d2) ? 'ุ' : d2}, RPM2:${isNaN(rpm2) ? 'ุ' : rpm2}, ุงููุฌููู: ${unknownType} โ ${unknownValue.toFixed(2)}`);
                    },
                }
            };

            // ----------------------- ูุนุงูุฌุงุช ุงูุฃุญุฏุงุซ (Event Listeners) -----------------------

            // ุฅุถุงูุฉ ูุนุงูุฌ ุญุฏุซ ููู ุนููุงู ูุณู ููุชุญ ุงูููุฏุงู ุงูููุงุจู
            sectionTitles.forEach(title => {
                title.addEventListener("click", function () {
                    const modalId = this.dataset.modalTarget; // ุฌูุจ ID ุงูููุฏุงู ูู ุณูุฉ data-modal-target
                    const targetModal = document.getElementById(modalId);
                    const calculatorId = targetModal.querySelector('.calculator').id; // ุฌูุจ ID ุงูุญุงุณุจุฉ ุฏุงุฎู ุงูููุฏุงู

                    if (targetModal) {
                        targetModal.classList.add("active"); // ุฅุถุงูุฉ ููุงุณ active ูุฅุธูุงุฑ ุงูููุฏุงู
                        // ุฅุฒุงูุฉ ุฃู ููุงุณุงุช "error" ุณุงุจูุฉ ูู ุญููู ุงูุฅุฏุฎุงู ุนูุฏ ูุชุญ ุงูููุฏุงู
                        const inputsInModal = targetModal.querySelectorAll('input, select');
                        inputsInModal.forEach(input => {
                            input.classList.remove("error");
                        });
                        // ุชุญููู ูุนุฑุถ ุญุงูุฉ ุงูุญุงุณุจุฉ ุงููุญููุธุฉ
                        loadAndDisplayCalculatorState(calculatorId, targetModal);
                        // ุชุญููู ูุนุฑุถ ุณุฌู ุงูุญุณุงุจุงุช ุงูุฎุงุต ุจูุฐู ุงูุญุงุณุจุฉ
                        loadAndRenderHistory(calculatorId + '-history-items');
                    }
                });
            });

            // ุฅุถุงูุฉ ูุนุงูุฌ ุญุฏุซ ููู ุฒุฑ ุฅุบูุงู ูุฅุบูุงู ุงูููุฏุงู ุงูุฎุงุต ุจู
            closeButtons.forEach(button => {
                button.addEventListener("click", function () {
                    const modal = this.closest(".modal"); // ุงูุจุญุซ ุนู ุฃูุฑุจ ุนูุตุฑ ุฃุจ ูุญูู ููุงุณ "modal"
                    if (modal) {
                        modal.classList.remove("active"); // ุฅุฒุงูุฉ ููุงุณ active ูุฅุฎูุงุก ุงูููุฏุงู
                    }
                });
            });

            // ุฅุถุงูุฉ ูุนุงูุฌ ุญุฏุซ ููููุฑ ุฎุงุฑุฌ ูุญุชูู ุงูููุฏุงู ูุฅุบูุงูู (ูุบูู ุงูููุฏุงู ุฅุฐุง ุชู ุงูููุฑ ุนูู ุงูุฎูููุฉ ุงูุดูุงูุฉ)
            modals.forEach(modal => {
                modal.addEventListener("click", function (event) {
                    if (event.target === modal) { // ุงูุชุญูู ููุง ุฅุฐุง ูุงู ุงูููุฑ ุนูู ุงูููุฏุงู ููุณู ูููุณ ูุญุชูุงู
                        modal.classList.remove("active");
                    }
                });
            });

            // ุฅุถุงูุฉ ูุนุงูุฌ ุญุฏุซ ููู ุฒุฑ "ุงุญุณุจ" ุฃู "ุชุญููู"
            document.querySelectorAll(".calculator button").forEach(button => {
                button.addEventListener("click", function () {
                    const calculatorId = this.closest(".calculator").id; // ุฌูุจ ID ุงูุญุงุณุจุฉ ุงูุฃู
                    const originalText = this.innerHTML; // ุญูุธ ุงููุต ุงูุฃุตูู ููุฒุฑ

                    // ุนุฑุถ ุฃููููุฉ ุชุญููู ูุชุนุทูู ุงูุฒุฑ ุฃุซูุงุก ุงูุญุณุงุจ
                    this.innerHTML = `<span class="loading"></span> ${originalText}`;
                    this.disabled = true;

                    const inputs = this.closest('.calculator').querySelectorAll('input[type="number"], select');
                    let allInputsValid = true; // ุนูุงูุฉ ูุชุชุจุน ุตุญุฉ ุฌููุน ุงููุฏุฎูุงุช

                    // ----------------------- ุชุญูู ุนุงู ูู ุตุญุฉ ุงููุฏุฎูุงุช ูุจู ุงูุญุณุงุจ -----------------------
                    inputs.forEach(input => {
                        if (input.type === 'number') {
                            // ูุนุงูุฌุฉ ุฎุงุตุฉ ูุญุงุณุจุฉ ุงูุจูุฑุฉ (ุญูุซ ููุณูุญ ุจูุฌูุฏ ุญููู ูุงุฑุบุฉ)
                            if (calculatorId === 'pulley-calculator') {
                                if (input.value !== '' && (isNaN(parseFloat(input.value)) || parseFloat(input.value) <= 0)) {
                                    input.classList.add("error");
                                    allInputsValid = false;
                                } else {
                                    input.classList.remove("error");
                                }
                            } else {
                                const value = parseFloat(input.value);
                                const min = parseFloat(input.min);
                                const max = parseFloat(input.max);
                                if (isNaN(value) || (input.hasAttribute('min') && value < min) || (input.hasAttribute('max') && value > max)) {
                                    input.classList.add("error");
                                    allInputsValid = false;
                                } else {
                                    input.classList.remove("error");
                                }
                            }
                        } else if (input.checkValidity && !input.checkValidity()) {
                            input.classList.add("error");
                            allInputsValid = false;
                        } else {
                            input.classList.remove("error");
                        }
                    });

                    // ----------------------- ุชุญูู ุฎุงุต ูุญุงุณุจุฉ ุงูุจูุฑุฉ (ูุฌุจ ุชุฑู ุญูู ูุงุญุฏ ููุท ูุงุฑุบุงู) -----------------------
                    if (calculatorId === 'pulley-calculator') {
                        let emptyCount = 0;
                        inputs.forEach(input => {
                            if (input.id.startsWith('pulley-') && input.value === '') {
                                emptyCount++;
                            }
                        });
                        if (emptyCount !== 1) {
                            displayResult(this.closest('.calculator').querySelector('.result').id, "ุงูุฑุฌุงุก ุชุฑู ุญูู ูุงุญุฏ ููุท ูุงุฑุบุงู ูููุฌููู ูู ุญุงุณุจุฉ ุงูุจูุฑุฉ.", false);
                            allInputsValid = false;
                            inputs.forEach(input => {
                                if (input.value === '') {
                                    input.classList.add("error");
                                }
                            });
                        } else {
                            inputs.forEach(input => {
                                if (input.value === '') {
                                    input.classList.remove("error");
                                }
                            });
                        }
                    }


                    setTimeout(() => {
                        if (allInputsValid && calculatorFunctions[calculatorId]) {
                            calculatorFunctions[calculatorId].calculate();
                        } else if (!allInputsValid) {
                            displayResult(this.closest('.calculator').querySelector('.result').id, "ุงูุฑุฌุงุก ุชุตุญูุญ ุงูุฃุฎุทุงุก ูู ุงูุฅุฏุฎุงูุงุช ุงููุญุฏุฏุฉ.", false);
                        } else {
                            console.error(`Calculation function for ID '${calculatorId}' not found.`);
                        }
                        this.innerHTML = originalText;
                        this.disabled = false;
                    }, 300);
                });
            });

            // ----------------------- ุงูุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช ูู ุงูููุช ุงููุนูู (ุนูุฏ ุงููุชุงุจุฉ) -----------------------
            document.querySelectorAll("input[type='number']").forEach(input => {
                input.addEventListener("input", function () {
                    this.classList.remove("error");

                    if (this.closest('.calculator').id === 'pulley-calculator' || (this.closest('.calculator').id === 'tank-calculator' && this.id === 'tank-width' && this.disabled)) {
                        return;
                    }

                    const value = parseFloat(this.value);
                    const min = parseFloat(this.min);
                    const max = parseFloat(this.max);
                    let isValid = true;

                    if (this.value === '') {
                        isValid = true;
                    } else if (isNaN(value)) {
                        isValid = false;
                    } else if (this.hasAttribute('min') && value < min) {
                        isValid = false;
                    } else if (this.hasAttribute('max') && value > max) {
                        isValid = false;
                    }

                    if (!isValid) {
                        this.classList.add("error");
                    } else {
                        this.classList.remove("error");
                    }
                });
            });

            // ----------------------- ููุทู ุฎุงุต ุจุจุนุถ ุงูุญุงุณุจุงุช (ุฅุธูุงุฑ/ุฅุฎูุงุก ุญููู) -----------------------

            // ููุทู ุฎุงุต ูุญุงุณุจุฉ ุงูุฎุฒุงู: ุฅุธูุงุฑ/ุฅุฎูุงุก ุญูู ุงูุนุฑุถ ุจูุงุกู ุนูู ุดูู ุงูุฎุฒุงู (ููุนุจ/ุฃุณุทูุงูู)
            const tankShapeSelect = document.getElementById('tank-shape');
            const tankWidthInput = document.getElementById('tank-width');
            const tankWidthGroup = document.getElementById('tank-width-group');
            
            if (tankShapeSelect && tankWidthInput && tankWidthGroup) {
                tankShapeSelect.addEventListener('change', function () {
                    if (this.value === 'cube') {
                        tankWidthGroup.style.display = 'flex';
                        tankWidthInput.disabled = false;
                        tankWidthInput.setAttribute('required', 'required');
                    } else {
                        tankWidthGroup.style.display = 'flex';
                        tankWidthInput.disabled = true;
                        tankWidthInput.removeAttribute('required');
                        tankWidthInput.classList.remove("error");
                    }
                });
                // ุชุดุบูู ุงูุญุฏุซ ูุฏููุงู ุนูุฏ ุชุญููู ุงูุตูุญุฉ ูุถุจุท ุงูุญุงูุฉ ุงูุฃูููุฉ
                const event = new Event('change');
                tankShapeSelect.dispatchEvent(event);
            }

            // ููุทู ุฎุงุต ูุญุงุณุจุฉ ุงูุจุทุงุฑูุฉ: ุฅุธูุงุฑ/ุฅุฎูุงุก ุญููู ุงูุชูุงุฑ ุงููุชุฑุฏุฏ (AC) ุจูุงุกู ุนูู ููุน ุงูุฌูุงุฒ (DC/AC)
            const batteryDeviceTypeSelect = document.getElementById('battery-device-type');
            const batteryACFields = document.querySelectorAll('.battery-ac-only');

            if (batteryDeviceTypeSelect && batteryACFields.length > 0) {
                batteryDeviceTypeSelect.addEventListener('change', function () {
                    if (this.value === 'ac') {
                        batteryACFields.forEach(group => group.style.display = 'flex');
                        document.getElementById('battery-device-phase').setAttribute('required', 'required');
                        document.getElementById('battery-device-power-factor').setAttribute('required', 'required');
                        document.getElementById('inverter-efficiency-battery').setAttribute('required', 'required');
                    } else {
                        batteryACFields.forEach(group => {
                            group.style.display = 'none';
                            const input = group.querySelector('input, select');
                            if (input) {
                                // ุฅุนุงุฏุฉ ุชุนููู ุงูููู ุงูุงูุชุฑุงุถูุฉ ุฃู ูุณุญ ุงูุญููู ุงููุฎููุฉ
                                if (input.id === 'battery-device-power-factor') {
                                    input.value = '0.8';
                                } else if (input.id === 'inverter-efficiency-battery') {
                                    input.value = '90';
                                } else if (input.id === 'battery-device-phase') {
                                    input.value = 'single';
                                } else {
                                    input.value = '';
                                }
                                input.classList.remove("error");
                                input.removeAttribute('required');
                            }
                        });
                    }
                });
                // ุชุดุบูู ุงูุญุฏุซ ูุฏููุงู ุนูุฏ ุชุญููู ุงูุตูุญุฉ ูุถุจุท ุงูุญุงูุฉ ุงูุฃูููุฉ
                const event = new Event('change');
                batteryDeviceTypeSelect.dispatchEvent(event);
            }

            // ----------------------- ูุธููุฉ ูุชุญููู ูุนุฑุถ ุญุงูุฉ ุงูุญุงุณุจุฉ ูุงููุชุงุฆุฌ -----------------------
            // ุชุนุฑูู ุงูููู ุงูุงูุชุฑุงุถูุฉ ุงูุฃูููุฉ ูุฌููุน ุญููู ุงูุฅุฏุฎุงูุ ุชูุณุชุฎุฏู ุนูุฏ ุนุฏู ูุฌูุฏ ุจูุงูุงุช ูุญููุธุฉ
            const defaultValues = {
                'unit-converter': {
                    'uc-power-factor': "0.8",
                    'uc-input-unit': "kw",
                    'uc-phase': "single"
                },
                'tank-calculator': {
                    'tank-shape': "cube"
                },
                'resistance-voltage-drop': {
                    'rvd-material': "copper",
                    'rvd-allowed-voltage-drop-percentage': "3",
                    'rvd-phase': "single",
                    'rvd-power-factor': "0.8"
                },
                'flow-converter': {
                    'flow-conversion-type': "m3h-to-lps"
                },
                'capacitor-calculator': {
                    'cap-current-pf': "0.7",
                    'cap-desired-pf': "0.95",
                    'cap-frequency': "50",
                    'cap-phase': "single"
                },
                'solar-panels-calculator': {
                    'solar-performance-factor': "80",
                    'inverter-efficiency': "90",
                    'pump-voltage': "230",
                    'pump-phase': "single",
                    'pump-power-factor': "0.8",
                    'ideal-series-voltage': ""
                },
                'battery-calculator': {
                    'battery-dod': "80",
                    'battery-efficiency': "90",
                    'battery-device-type': "dc",
                    'battery-device-phase': "single",
                    'battery-device-power-factor': "0.8",
                    'inverter-efficiency-battery': "90"
                },
                'pulley-calculator': {
                    'pulley-d1': "",
                    'pulley-rpm1': "",
                    'pulley-d2': "",
                    'pulley-rpm2': ""
                }
            };

            /**
             * ุชุญูู ุญุงูุฉ ุงูุญุงุณุจุฉ ุงููุญููุธุฉ ูุชููุฃ ุญููู ุงูุฅุฏุฎุงู ุจูุง.
             * ุฅุฐุง ูู ุชูุฌุฏ ุญุงูุฉ ูุญููุธุฉุ ูุชู ุชุนููู ุงูููู ุงูุงูุชุฑุงุถูุฉ.
             * ููุง ุชููู ุจุชููุฆุฉ ุนุฑุถ ุงููุชุงุฆุฌ ูุณุฌู ุงูุชุงุฑูุฎ.
             * @param {string} calculatorId - ูุนุฑูู ุงูุญุงุณุจุฉ.
             * @param {HTMLElement} targetElement - ุงูุนูุตุฑ ุงูุฃุจ ููุญุงุณุจุฉ (ุงูููุฏุงู).
             */
            function loadAndDisplayCalculatorState(calculatorId, targetElement) {
                const historyContainerId = calculatorId + '-history-items';
                const historyDiv = targetElement.querySelector(`#${historyContainerId}`);
                const resultElement = targetElement.querySelector('.result');

                if (historyDiv) {
                    historyDiv.innerHTML = ''; // ูุณุญ ุนุฑุถ ุงูุณุฌู ุนูุฏ ูุชุญ ุงูููุฏุงู
                }

                const savedState = loadCalculatorState(calculatorId); // ูุญุงููุฉ ุชุญููู ุงูุญุงูุฉ ุงููุญููุธุฉ
                if (savedState && savedState.inputs) {
                    // ุฅุฐุง ูุฌุฏุช ุจูุงูุงุช ูุญููุธุฉุ ูู ุจููุก ุงููุฏุฎูุงุช ุจูุง
                    populateInputs(calculatorId, savedState.inputs, targetElement);
                } else {
                    // ุฅุฐุง ูู ุชูุฌุฏ ุจูุงูุงุช ูุญููุธุฉุ ูู ุจุชุนููู ุงูููู ุงูุงูุชุฑุงุถูุฉ
                    const inputs = targetElement.querySelectorAll('input[type="number"], select');
                    inputs.forEach(input => {
                        const defaultValue = defaultValues[calculatorId] ? defaultValues[calculatorId][input.id] : undefined;
                        if (defaultValue !== undefined) {
                            input.value = defaultValue;
                        } else {
                            // ุชุนููู ููู ูุงุฑุบุฉ ูุญุงุณุจุฉ ุงูุจูุฑุฉ ุงูุชุฑุงุถูุงู
                            if (calculatorId === 'pulley-calculator' && (input.id === 'pulley-d1' || input.id === 'pulley-rpm1' || input.id === 'pulley-d2' || input.id === 'pulley-rpm2')) {
                                input.value = '';
                            } else {
                                input.value = ""; // ูุณุญ ุงูุญููู ุงูุฃุฎุฑู
                            }
                        }
                        input.classList.remove("error"); // ุฅุฒุงูุฉ ุฃู ุนูุงูุงุช ุฎุทุฃ ุณุงุจูุฉ
                    });
                }

                // ุฅุนุงุฏุฉ ุชุนููู ูุต ุนุฑุถ ุงููุชูุฌุฉ ุฅูู ุญุงูุชู ุงูุฃูููุฉ
                if (resultElement) {
                    let initialResultText = "ุงููุชุงุฆุฌ: ...";
                    // ุชุฎุตูุต ุงููุต ุงูุฃููู ูุจุนุถ ุงูุญุงุณุจุงุช
                    if (calculatorId === 'percentage-calculator') {
                        initialResultText = "ุงููุงุชุฌ: ...";
                    } else if (calculatorId === 'capacitor-calculator') {
                        initialResultText = "ุงูุณุนุฉ ุงููุทููุจุฉ: ...";
                    } else if (calculatorId === 'flow-converter') {
                        initialResultText = "ุงููุชูุฌุฉ: ...";
                    } else if (calculatorId === 'unit-converter') {
                        initialResultText = '<p>ุงููุชุงุฆุฌ:</p><ul><li>kW: <span>...</span></li><li>kVA: <span>...</span></li><li>HP: <span>...</span></li><li>Ampere: <span>...</span></li></ul>';
                    } else if (calculatorId === 'battery-calculator') {
                        initialResultText = 'ุงููุชุงุฆุฌ: ...';
                    }

                    resultElement.innerHTML = initialResultText;
                    resultElement.className = "result"; // ุฅุนุงุฏุฉ ุชุนููู ุงูููุงุณุงุช ูุฅุฒุงูุฉ ุฃู ููุงุณุงุช error/success
                }

                // ุฅุนุงุฏุฉ ุชุดุบูู ููุทู ุฅุธูุงุฑ/ุฅุฎูุงุก ุงูุญููู ูุถูุงู ุงูุชูุงูู ูุน ุงูุญุงูุฉ ุงููุญููุฉ
                if (calculatorId === 'tank-calculator' && tankShapeSelect) {
                    const event = new Event('change');
                    tankShapeSelect.dispatchEvent(event);
                }
                if (calculatorId === 'battery-calculator' && batteryDeviceTypeSelect) {
                    const event = new Event('change');
                    batteryDeviceTypeSelect.dispatchEvent(event);
                }
            }

            // ุนูุฏ ุชุญููู ุงูุตูุญุฉ ูุฃูู ูุฑุฉุ ูู ุจุชุญููู ูุนุฑุถ ุญุงูุฉ ูู ุญุงุณุจุฉ
            // ูุฌุจ ุฃู ูุชู ุฐูู ููู ุญุงุณุจุฉ ุจุบุถ ุงููุธุฑ ุนูุง ุฅุฐุง ูุงู ููุฏุงููุง ููุชูุญูุง ุฃู ูุง.
            // ูุฐุง ูุถูู ุฃู ุงูููู ุงูุงูุชุฑุงุถูุฉ ุฃู ุงููุญููุธุฉ ุฌุงูุฒุฉ ุนูุฏ ุฃูู ูุชุญ ููููุฏุงู.
            document.querySelectorAll('.calculator').forEach(calculatorDiv => {
                const calculatorId = calculatorDiv.id;
                // ูุฌุจ ุฃู ููุฑุฑ `calculatorDiv` ููุณู ูู `targetElement` ูุฃูู ุงูุนูุตุฑ ุงูุฃุจ ููุญูููุ
                // ูููุณ ุจุงูุถุฑูุฑุฉ ุงูููุฏุงู ุฅุฐุง ูู ููู ููุชูุญูุง.
                // ููุน ุฐููุ ุฏุงูุฉ `loadAndDisplayCalculatorState` ููุตููุฉ ูุชุนูู ูุน ุงูุนูุตุฑ ุงูุฃุจ ููุญุงุณุจุฉุ
                // ุณูุงุก ูุงู ุงูููุฏุงู ุฃู `div.calculator` ูุจุงุดุฑุฉ.
                // ูู ุณูุงู ุชุดุบูููุง ุนูุฏ ูุชุญ ุงูููุฏุงูุ `targetModal` ูู ุงูุตุญูุญ.
                // ุนูุฏ ุชุญููู ุงูุตูุญุฉุ ูููููุง ููุท ุงูุชุฃูุฏ ูู ุชุนููู ุงูููู ุงูุงูุชุฑุงุถูุฉ
                // ููู ูููู ููุงู ูุชุงุฆุฌ ูุนุฑูุถุฉ ูู ุงูุจุฏุงูุฉ.
                // ุงูุญู ุงูุฃูุถู ูู ุงุณุชุฏุนุงุก ูุฐู ุงููุธููุฉ ููุท ุนูุฏ ูุชุญ ุงูููุฏุงู.
                // ุงูููุฏ ุงูุญุงูู ูููู ุจุฐูู ุจุงููุนู (ูู ูุนุงูุฌ ุงูููุฑ ุนูู sectionTitle).
                // ูุฐุงุ ููุณ ููุงู ุญุงุฌุฉ ูุชูุฑุงุฑูุง ููุง ุนูุฏ ุชุญููู DOMContentLoaded.
            });
        });
    </script>

</body>
</html>

